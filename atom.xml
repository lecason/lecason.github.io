<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[LECASON]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://lecason.com/"/>
  <updated>2015-09-29T14:40:44.000Z</updated>
  <id>http://lecason.com/</id>
  
  <author>
    <name><![CDATA[Lecason]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Map é«˜å¾·åœ°å›¾å¼€å‘]]></title>
    <link href="http://lecason.com/2015/09/29/Gaode-Map/"/>
    <id>http://lecason.com/2015/09/29/Gaode-Map/</id>
    <published>2015-09-29T01:16:27.000Z</published>
    <updated>2015-09-29T14:40:44.000Z</updated>
    <content type="html"><![CDATA[<p>LBSå¼€æ”¾å¹³å°åœ°å€ï¼š<a href="http://lbs.amap.com" target="_blank" rel="external">http://lbs.amap.com</a>ï¼Œç”³è¯·APIå¹¶å¯¼å…¥ç›¸å…³æ–‡ä»¶ï¼ŒiOS 8åœ¨<code>Info.plist</code>é‡Œé¢æ·»åŠ è®¾ç½® <code>NSLocationWhenInUseUsageDescription</code>è¯·æ±‚æƒé™ã€‚</p>
<h2 id="åˆ›å»ºåœ°å›¾å¹¶æ˜¾ç¤º">åˆ›å»ºåœ°å›¾å¹¶æ˜¾ç¤º</h2><p>åˆ›å»ºMAMapView</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">"ViewController.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;MAMapKit/MAMapKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#define APIKey @<span class="title">"f9ddf1dd0e1d7ab50f0d24c6e02e512c"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()  &lt;<span class="title">MAMapViewDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) MAMapView *mapView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>åˆä½¿åŒ–ï¼Œåœ¨viewDidLoadé‡Œé¢</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)initMapView &#123;</span><br><span class="line"></span><br><span class="line">    [MAMapServices sharedServices]<span class="variable">.apiKey</span> = APIKey;</span><br><span class="line">    _mapView = [[MAMapView alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="built_in">CGRectGetWidth</span>(<span class="keyword">self</span><span class="variable">.view</span><span class="variable">.bounds</span>), <span class="built_in">CGRectGetHeight</span>(<span class="keyword">self</span><span class="variable">.view</span><span class="variable">.bounds</span>))];</span><br><span class="line">    _mapView<span class="variable">.delegate</span> = <span class="keyword">self</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.view</span> addSubview:_mapView];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºå¯¼èˆªButton">åˆ›å»ºå¯¼èˆªButton</h2><p>è®°å¾—åœ¨viewDidLoadé‡Œé¢init</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)initControls &#123;</span><br><span class="line"></span><br><span class="line">    _locationButton = [[<span class="built_in">UIButton</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="built_in">CGRectGetHeight</span>(_mapView<span class="variable">.bounds</span>) - <span class="number">80</span>, <span class="number">40</span>, <span class="number">40</span>)];</span><br><span class="line">    _locationButton<span class="variable">.autoresizingMask</span> = <span class="built_in">UIViewAutoresizingFlexibleRightMargin</span> | <span class="built_in">UIViewAutoresizingFlexibleTopMargin</span>;</span><br><span class="line">    _locationButton<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">    _locationButton<span class="variable">.layer</span><span class="variable">.cornerRadius</span> = <span class="number">5</span>;</span><br><span class="line">    [_locationButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(locateAction) forControlEvents:<span class="built_in">UIControlEventTouchDown</span>];</span><br><span class="line">    [_locationButton setImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@""</span>] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    [_mapView addSubview:_locationButton];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)locateAction &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_mapView<span class="variable">.userTrackingMode</span> != MAUserTrackingModeFollow) &#123;</span><br><span class="line">    [_mapView setUserTrackingMode: MAUserTrackingModeFollow animated:<span class="literal">YES</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çŠ¶æ€æ”¹å˜çš„æ—¶å€™è°ƒç”¨æ¥å£</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“userTrackingModeæ”¹å˜æ—¶è°ƒç”¨æ­¤æ¥å£</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didChangeUserTrackingMode:(MAUserTrackingMode)mode animated:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mode == MAUserTrackingModeNone) &#123;</span><br><span class="line">        _locationButton<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (mode == MAUserTrackingModeFollow) &#123;</span><br><span class="line">        _locationButton<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> blueColor];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åœ°ç†ç¼–ç å’Œé€†åœ°ç†ç¼–ç æŸ¥æ‰¾å½“å‰åæ ‡åœ°å€">åœ°ç†ç¼–ç å’Œé€†åœ°ç†ç¼–ç æŸ¥æ‰¾å½“å‰åæ ‡åœ°å€</h2><p>å¯¼å…¥å¤´æ–‡ä»¶ä»¥åŠè®¾ç½®ä»£ç†</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;AMapSearchKit/AMapSearchKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()  &lt;<span class="title">AMapSearchDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) AMapSearchAPI *search;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)initSearch &#123;</span><br><span class="line"></span><br><span class="line">    [AMapSearchServices sharedServices]<span class="variable">.apiKey</span> = APIKey;</span><br><span class="line">    _search = [[AMapSearchAPI alloc] init];</span><br><span class="line">    _search<span class="variable">.delegate</span> = <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‰ä¸‹locationButtonæ—¶ï¼Œä¿å­˜åœ°ç†ä½ç½®ä¿¡æ¯åˆ°æœ¬åœ°å˜é‡</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@interface ViewController ()  &#60;MAMapViewDelegate,AMapSearchDelegate&#62;&#10;&#10;@property (nonatomic, strong) CLLocation *currentLocation;&#10;&#10;@end</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°ä½ç½®åè°ƒç”¨æ¥å£</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didUpdateUserLocation:(MAUserLocation *)userLocation updatingLocation:(<span class="built_in">BOOL</span>)updatingLocation &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"userLocaton: %@"</span>,userLocation<span class="variable">.location</span>);</span><br><span class="line">    _currentLocation = userLocation<span class="variable">.location</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€†åœ°ç†ç¼–ç è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)reGeoAction &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_currentLocation) &#123;</span><br><span class="line">        AMapReGeocodeSearchRequest *request = [[AMapReGeocodeSearchRequest alloc] init];</span><br><span class="line">        request<span class="variable">.location</span> = [AMapGeoPoint locationWithLatitude:_currentLocation<span class="variable">.coordinate</span><span class="variable">.latitude</span> longitude:_currentLocation<span class="variable">.coordinate</span><span class="variable">.longitude</span>];</span><br><span class="line">        [_search AMapReGoecodeSearch:request];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ±‚åçš„å›è°ƒæ–¹æ³• </p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€†åœ°ç†ç¼–ç è¯·æ±‚è¯·æ±‚å¤±è´¥çš„æ—¶å€™è°ƒç”¨æ¥å£</span></span><br><span class="line">- (<span class="keyword">void</span>)AMapSearchRequest:(<span class="keyword">id</span>)request didFailWithError:(<span class="built_in">NSError</span> *)error &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"request: %@, error: %@"</span>,request,error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€†åœ°ç†ç¼–ç è¯·æ±‚è¯·æ±‚æˆåŠŸçš„æ—¶å€™è°ƒç”¨æ¥å£</span></span><br><span class="line">- (<span class="keyword">void</span>)onReGeocodeSearchDone:(AMapReGeocodeSearchRequest *)request response:(AMapReGeocodeSearchResponse *)response &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"response %@"</span>,response);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSString</span> *title = response<span class="variable">.regeocode</span><span class="variable">.addressComponent</span><span class="variable">.city</span>;</span><br><span class="line">    <span class="keyword">if</span> (title<span class="variable">.length</span> == <span class="number">0</span>) &#123;</span><br><span class="line">    title = response<span class="variable">.regeocode</span><span class="variable">.addressComponent</span><span class="variable">.province</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºä½ç½®åœ¨åœ°å›¾çš„å½“å‰annotationä¸Š</span></span><br><span class="line">    _mapView<span class="variable">.userLocation</span><span class="variable">.title</span> = title;</span><br><span class="line">    _mapView<span class="variable">.userLocation</span><span class="variable">.subtitle</span> = response<span class="variable">.regeocode</span><span class="variable">.formattedAddress</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€‰ä¸­å®šä½annotationçš„æ—¶å€™è¿›è¡Œé€†åœ°ç†ä½ç½®ç¼–ç å¾—åˆ°ä½ç½®</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didSelectAnnotationView:(MAAnnotationView *)view &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€‰ä¸­å®šä½annotationçš„æ—¶å€™è¿›è¡Œé€†åœ°ç†ä½ç½®ç¼–ç </span></span><br><span class="line">    <span class="keyword">if</span> ([view<span class="variable">.annotation</span> isKindOfClass:[MAUserLocation class]]) &#123;</span><br><span class="line">        [<span class="keyword">self</span> reGeoAction];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°ä¸‹é¢é”™è¯¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*** Terminating app due to uncaught exception <span class="string">'NSInvalidArgumentException'</span>, reason: <span class="string">'-[AMapGeoPoint coordinateString]: unrecognized selector sent to instance 0x16596810'</span></span><br><span class="line">*** First throw call stack:</span><br><span class="line">(<span class="number">0</span>x2bff349f <span class="number">0</span>x397adc8b <span class="number">0</span>x2bff88b9 <span class="number">0</span>x2bff67d7 <span class="number">0</span>x2bf28058 <span class="number">0</span>x34bf9 <span class="number">0</span>x3738f <span class="number">0</span>x356c9 <span class="number">0</span>x33b11 <span class="number">0</span>x33f27 <span class="number">0</span>x647b9 <span class="number">0</span>x79693 <span class="number">0</span>x6133b <span class="number">0</span>x2f6318bb <span class="number">0</span>x2f4e04e9 <span class="number">0</span>x2f8f501b <span class="number">0</span>x2f4a9e41 <span class="number">0</span>x2f4a7d1f <span class="number">0</span>x2bfb9d95 <span class="number">0</span>x2bfb7453 <span class="number">0</span>x2bfb785b <span class="number">0</span>x2bf053c1 <span class="number">0</span>x2bf051d3 <span class="number">0</span>x333030a9 <span class="number">0</span>x2f5137b1 <span class="number">0</span>x342b9 <span class="number">0</span>x39d2daaf)</span><br><span class="line">libc++abi.dylib: terminating with uncaught exception of <span class="built_in">type</span> NSException</span><br></pre></td></tr></table></figure>
<p>é‚£æ˜¯ç”±äºæ²¡åœ¨<code>Xcode</code> - <code>TARGETS</code> - <code>Build Settings</code>- <code>Other Linker Flags</code> ä¸­æ·»åŠ  <code>-ObjC</code></p>
<h2 id="é™„è¿‘æœç´¢">é™„è¿‘æœç´¢</h2><p>åˆ›å»ºButton</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)initControls &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIButton</span> *searchButton = [[<span class="built_in">UIButton</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">80</span>, <span class="built_in">CGRectGetHeight</span>(_mapView<span class="variable">.bounds</span>) - <span class="number">80</span>, <span class="number">40</span>, <span class="number">40</span>)];</span><br><span class="line">    searchButton<span class="variable">.autoresizingMask</span> = <span class="built_in">UIViewAutoresizingFlexibleRightMargin</span> | <span class="built_in">UIViewAutoresizingFlexibleTopMargin</span>;</span><br><span class="line">    searchButton<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">    searchButton<span class="variable">.layer</span><span class="variable">.cornerRadius</span> = <span class="number">5</span>;</span><br><span class="line">    [searchButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(searchAction) forControlEvents:<span class="built_in">UIControlEventTouchDown</span>];</span><br><span class="line">    [searchButton setImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@""</span>] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    [_mapView addSubview:searchButton];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®å±æ€§</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()  &lt;<span class="title">UITableViewDataSource</span>,<span class="title">UITableViewDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span> *pois;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UITableView</span> *tableView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableArray</span> *annotations;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>è¯·æ±‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)searchAction &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (_currentLocation == <span class="literal">nil</span> || _search == <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Serach Fail"</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    AMapPOIAroundSearchRequest *request = [[AMapPOIAroundSearchRequest alloc] init];</span><br><span class="line">    request<span class="variable">.location</span> = [AMapGeoPoint locationWithLatitude:_currentLocation<span class="variable">.coordinate</span><span class="variable">.latitude</span> longitude:_currentLocation<span class="variable">.coordinate</span><span class="variable">.longitude</span>];</span><br><span class="line">    request<span class="variable">.keywords</span> = <span class="string">@"å•†åŠ¡"</span>;</span><br><span class="line">    <span class="comment">// typeså±æ€§è¡¨ç¤ºé™å®šæœç´¢POIçš„ç±»åˆ«ï¼Œé»˜è®¤ä¸ºï¼šé¤é¥®æœåŠ¡|å•†åŠ¡ä½å®…|ç”Ÿæ´»æœåŠ¡</span></span><br><span class="line">    <span class="comment">// POIçš„ç±»å‹å…±åˆ†ä¸º20ç§å¤§ç±»åˆ«ï¼Œåˆ†åˆ«ä¸ºï¼š</span></span><br><span class="line">    <span class="comment">// æ±½è½¦æœåŠ¡|æ±½è½¦é”€å”®|æ±½è½¦ç»´ä¿®|æ‘©æ‰˜è½¦æœåŠ¡|é¤é¥®æœåŠ¡|è´­ç‰©æœåŠ¡|ç”Ÿæ´»æœåŠ¡|ä½“è‚²ä¼‘é—²æœåŠ¡|</span></span><br><span class="line">    <span class="comment">// åŒ»ç–—ä¿å¥æœåŠ¡|ä½å®¿æœåŠ¡|é£æ™¯åèƒœ|å•†åŠ¡ä½å®…|æ”¿åºœæœºæ„åŠç¤¾ä¼šå›¢ä½“|ç§‘æ•™æ–‡åŒ–æœåŠ¡|</span></span><br><span class="line">    <span class="comment">// äº¤é€šè®¾æ–½æœåŠ¡|é‡‘èä¿é™©æœåŠ¡|å…¬å¸ä¼ä¸š|é“è·¯é™„å±è®¾æ–½|åœ°ååœ°å€ä¿¡æ¯|å…¬å…±è®¾æ–½</span></span><br><span class="line">    request<span class="variable">.types</span> = <span class="string">@"é¤é¥®æœåŠ¡|å•†åŠ¡ä½å®…|ç”Ÿæ´»æœåŠ¡"</span>;</span><br><span class="line">    [_search AMapPOIAroundSearch:request];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿”å›ç»“æœï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)onPOISearchDone:(AMapPOIAroundSearchRequest *)request response:(AMapPOISearchResponse *)response</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(response<span class="variable">.pois</span><span class="variable">.count</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"request: %@"</span>,request);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"response: %@"</span>,response);</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">if</span> (response<span class="variable">.pois</span><span class="variable">.count</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        _pois = response<span class="variable">.pois</span>;</span><br><span class="line">        [_tableView reloadData];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ˜¾ç¤ºç»“æœ,å…ˆåˆä½¿åŒ–</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)initAttributes &#123;</span><br><span class="line"></span><br><span class="line">    _annotations = [[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">    _pois = <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)initTableView &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">CGFloat</span> halfHeight = <span class="built_in">CGRectGetHeight</span>(<span class="keyword">self</span><span class="variable">.view</span><span class="variable">.bounds</span>) * <span class="number">0.5</span>;</span><br><span class="line">    _tableView = [[<span class="built_in">UITableView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, halfHeight, <span class="built_in">CGRectGetWidth</span>(<span class="keyword">self</span><span class="variable">.view</span><span class="variable">.bounds</span>), <span class="built_in">CGRectGetHeight</span>(<span class="keyword">self</span><span class="variable">.view</span><span class="variable">.bounds</span>) * <span class="number">0.5</span>) style:<span class="built_in">UITableViewStylePlain</span>];</span><br><span class="line">    _tableView<span class="variable">.delegate</span> = <span class="keyword">self</span>;</span><br><span class="line">    _tableView<span class="variable">.dataSource</span> = <span class="keyword">self</span>;</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.view</span> addSubview:_tableView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Tableview ä»£ç†</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSInteger</span>)tableView:(<span class="built_in">UITableView</span> *)tableView numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> _pois<span class="variable">.count</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UITableViewCell</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">NSString</span> *cellIdentifier = <span class="string">@"cellIdentifier"</span>;</span><br><span class="line">    <span class="built_in">UITableViewCell</span> *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];</span><br><span class="line">    <span class="keyword">if</span> (cell == <span class="literal">nil</span>) &#123;</span><br><span class="line">        cell = [[<span class="built_in">UITableViewCell</span> alloc] initWithStyle:<span class="built_in">UITableViewCellStyleSubtitle</span> reuseIdentifier:cellIdentifier];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    AMapPOI *poi = _pois[indexPath<span class="variable">.row</span>];</span><br><span class="line">    cell<span class="variable">.textLabel</span><span class="variable">.text</span> = poi<span class="variable">.name</span>;</span><br><span class="line">    cell<span class="variable">.detailTextLabel</span><span class="variable">.text</span> = poi<span class="variable">.address</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ˜¾ç¤ºannotationåœ¨åœ°å›¾ä¸Š">æ˜¾ç¤ºannotationåœ¨åœ°å›¾ä¸Š</h2><p>ç‚¹å‡»TableViewCellçš„æ—¶å€™</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didSelectRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath &#123;</span><br><span class="line"></span><br><span class="line">    [tableView deselectRowAtIndexPath:indexPath animated:<span class="literal">YES</span>];</span><br><span class="line"></span><br><span class="line">    AMapPOI *poi = _pois[indexPath<span class="variable">.row</span>];</span><br><span class="line"></span><br><span class="line">    MAPointAnnotation *annotation = [[MAPointAnnotation alloc] init];</span><br><span class="line">    annotation<span class="variable">.coordinate</span> = CLLocationCoordinate2DMake(poi<span class="variable">.location</span><span class="variable">.latitude</span>, poi<span class="variable">.location</span><span class="variable">.longitude</span>);</span><br><span class="line">    annotation<span class="variable">.title</span> = poi<span class="variable">.name</span>;</span><br><span class="line">    annotation<span class="variable">.subtitle</span> = poi<span class="variable">.address</span>;</span><br><span class="line"></span><br><span class="line">    [_mapView removeAnnotations:_mapView<span class="variable">.annotations</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®°å½•ä¸‹å·²ç»addè¿‡çš„annotation</span></span><br><span class="line">    [_annotations addObject:annotation];</span><br><span class="line"></span><br><span class="line">    [_mapView addAnnotation:annotation];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®åœ°å›¾ä¸­å¿ƒ</span></span><br><span class="line">    [_mapView setCenterCoordinate:annotation<span class="variable">.coordinate</span> animated:<span class="literal">YES</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºcalloutView</span></span><br><span class="line">    [_mapView selectAnnotation:annotation animated:<span class="literal">YES</span>];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡ç”¨æ˜¾ç¤ºannotation</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (MAAnnotationView *)mapView:(MAMapView *)mapView viewForAnnotation:(<span class="keyword">id</span>&lt;MAAnnotation&gt;)annotation &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ([annotation isKindOfClass:[MAPointAnnotation class]]) &#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="built_in">NSString</span> *reuseIndentifier = <span class="string">@"reuseIndentifier"</span>;</span><br><span class="line">        MAPinAnnotationView *annotationView = (MAPinAnnotationView *)[mapView   dequeueReusableAnnotationViewWithIdentifier:reuseIndentifier];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (annotationView == <span class="literal">nil</span>) &#123;</span><br><span class="line">        annotationView = [[MAPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuseIndentifier];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        annotationView<span class="variable">.canShowCallout</span> = <span class="literal">YES</span>;</span><br><span class="line">        <span class="keyword">return</span> annotationView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç§»åŠ¨åœ°å›¾çš„æ—¶å€™ï¼Œæ›´æ–°åˆ—è¡¨ä½ç½®ä¿¡æ¯">ç§»åŠ¨åœ°å›¾çš„æ—¶å€™ï¼Œæ›´æ–°åˆ—è¡¨ä½ç½®ä¿¡æ¯</h2><p>ç§»åŠ¨åœ°å›¾å®Œæˆåæ‰§è¡Œçš„æ–¹æ³•<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView regionDidChangeAnimated:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line"></span><br><span class="line">    AMapPOIAroundSearchRequest *request = [[AMapPOIAroundSearchRequest alloc] init];</span><br><span class="line">    request<span class="variable">.location</span> = [AMapGeoPoint locationWithLatitude:_mapView<span class="variable">.centerCoordinate</span><span class="variable">.latitude</span> longitude:_mapView<span class="variable">.centerCoordinate</span><span class="variable">.longitude</span>];</span><br><span class="line">    request<span class="variable">.types</span> = <span class="string">@"é¤é¥®æœåŠ¡|å•†åŠ¡ä½å®…|ç”Ÿæ´»æœåŠ¡"</span>;</span><br><span class="line">    [_search AMapPOIAroundSearch:request];</span><br><span class="line"></span><br><span class="line">    MAPointAnnotation *annotation = [[MAPointAnnotation alloc] init];</span><br><span class="line">    annotation<span class="variable">.coordinate</span> = CLLocationCoordinate2DMake(_mapView<span class="variable">.centerCoordinate</span><span class="variable">.latitude</span>, _mapView<span class="variable">.centerCoordinate</span><span class="variable">.longitude</span>);</span><br><span class="line"></span><br><span class="line">    [_mapView removeAnnotations:_mapView<span class="variable">.annotations</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®°å½•ä¸‹å·²ç»addè¿‡çš„annotation</span></span><br><span class="line">    [_annotations addObject:annotation];</span><br><span class="line">    [_centerAnnotationImage removeFromSuperview];</span><br><span class="line">    [_mapView addAnnotation:annotation];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å°†è¦ç§»åŠ¨åœ°å›¾çš„æ—¶å€™æ‰§è¡Œçš„æ–¹æ³•</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView regionWillChangeAnimated:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line"></span><br><span class="line">    _centerAnnotationImage = [[<span class="built_in">UIImageView</span> alloc] initWithImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"centerAnnotation"</span>]];</span><br><span class="line">    _centerAnnotationImage<span class="variable">.center</span> = _mapView<span class="variable">.center</span>;</span><br><span class="line">    [_mapView removeAnnotations:_mapView<span class="variable">.annotations</span>];</span><br><span class="line">    [_mapView addSubview:_centerAnnotationImage];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p>LBSå¼€æ”¾å¹³å°åœ°å€ï¼š<a href="http://lbs.amap.com" target="_blank" rel="external">http://lbs.amap.com</a>ï¼Œç”³è¯·APIå¹¶å¯¼å…¥ç›¸å…³æ–‡ä»¶ï¼ŒiOS 8åœ¨<code>Info.plist</code>]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼]]></title>
    <link href="http://lecason.com/2015/09/27/iOS-Observer-Design-Mode/"/>
    <id>http://lecason.com/2015/09/27/iOS-Observer-Design-Mode/</id>
    <published>2015-09-27T04:10:00.000Z</published>
    <updated>2015-09-28T01:08:13.000Z</updated>
    <content type="html"><![CDATA[<h1 id="è‡ªå·²å®ç°ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼">è‡ªå·²å®ç°ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼</h1><p>å®ç°ä¸€ä¸ªç±»ä¼¼ç°å®ç”Ÿæ´»ä¸­ä¹¦åˆŠå‘è¡Œçš„æ¨¡å¼ï¼Œ<code>æ‚å¿—ç¤¾</code> å‘è¡Œç®¡ç†æ‚å¿—, <code>æ‚å¿—</code>æœ‰æ‚å¿—å·ï¼Œ<code>è¯»è€…</code>è®¢é˜…æ‚å¿—ã€‚</p>
<h2 id="åˆ›å»ºå®šé˜…ä¸­å¿ƒ">åˆ›å»ºå®šé˜…ä¸­å¿ƒ</h2><p>åˆ›å»ºä¸€ä¸ªå®šé˜…ä¸­å¿ƒ<code>SubscriptionCenter.swift</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">UIKit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‚å¿—ç¤¾</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionCenter</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è®¾è®¡æŠ½è±¡æ¥å£">è®¾è®¡æŠ½è±¡æ¥å£</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‚å¿—ç¤¾</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionCenter</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ‚å¿—</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">createSubscriptionNumber</span>(<span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤æ‚å¿—</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">removeSubscriptionNumber</span>(<span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·å®šé˜…æ‚å¿—</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">addCustomer</span>(<span class="title">customer</span>: <span class="title">AnyObject</span>,<span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·å–æ¶ˆå®šé˜…</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">removeCustomer</span>(<span class="title">customer</span>: <span class="title">AnyObject</span>,<span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‚å¿—ç¤¾å‘è¡Œæ‚å¿—åˆ°å®šé˜…ç”¨æˆ·</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">sendMessage</span>(<span class="title">message</span>: <span class="title">AnyObject</span>, <span class="title">toSubscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç”¨åè®®æ¥çº¦æŸç”¨æˆ·">ç”¨åè®®æ¥çº¦æŸç”¨æˆ·</h2><p>ç”¨åè®®æ¥çº¦æŸå¯ä»¥å®šé˜…çš„ç”¨æˆ·</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨åè®®æ¥çº¦æŸå¯ä»¥å®šé˜…çš„ç”¨æˆ·</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SubscriptionCenterProtocol</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç”¨æˆ·ä»è¿™é‡Œæ”¶åˆ°æ‚å¿—</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">subscriptionMessage</span><span class="params">(message: AnyObject, subscriptionNumber: String)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¿®æ”¹addCustomer,å’ŒremoveCustomerä¸­çš„customerç±»å‹</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æˆ·å®šé˜…æ‚å¿—</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">addCustomer</span>(<span class="title">customer</span>: <span class="title">SubscriptionCenterProtocol</span>, <span class="title">subscripitonNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æˆ·å–æ¶ˆå®šé˜…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">removeCustomer</span>(<span class="title">customer</span>: <span class="title">SubscriptionCenterProtocol</span>, <span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®ç°æ¥å£">å®ç°æ¥å£</h2><p>é€šè¿‡subscriptionDictionaryæ¥ç®¡ç†ç”¨æˆ·</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‚å¿—ç¤¾</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubscriptionCenter</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç®¡ç†å®šä¹‰ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> subscriptionDictionary: <span class="type">NSMutableDictionary</span>! = <span class="type">NSMutableDictionary</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ‚å¿—</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">createSubscriptionNumber</span>(<span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">var</span> hashTable: <span class="type">NSHashTable</span>? = <span class="keyword">self</span>.existSubscriptionNumber(subscriptionNumber) &#123;</span><br><span class="line">            hashTable = <span class="type">NSHashTable</span>.weakObjectsHashTable()</span><br><span class="line">            subscriptionDictionary.setObject(hashTable!, forKey: subscriptionNumber)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤æ‚å¿—</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">removeSubscriptionNumber</span>(<span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">var</span> <span class="number">_</span> = <span class="keyword">self</span>.existSubscriptionNumber(subscriptionNumber) &#123;</span><br><span class="line">            subscriptionDictionary.removeObjectForKey(subscriptionNumber)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·å®šé˜…æ‚å¿—</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">addCustomer</span>(<span class="title">customer</span>: <span class="title">SubscriptionCenterProtocol</span>, <span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> hashTable: <span class="type">NSHashTable</span>? = <span class="keyword">self</span>.existSubscriptionNumber(subscriptionNumber)</span><br><span class="line">        hashTable?.addObject(customer)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·å–æ¶ˆå®šé˜…</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">removeCustomer</span>(<span class="title">customer</span>: <span class="title">SubscriptionCenterProtocol</span>, <span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> hashTable: <span class="type">NSHashTable</span>? = <span class="keyword">self</span>.existSubscriptionNumber(subscriptionNumber)</span><br><span class="line">        hashTable?.removeObject(customer)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‚å¿—ç¤¾å‘è¡Œæ‚å¿—åˆ°å®šé˜…ç”¨æˆ·</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">sendMessage</span>(<span class="title">message</span>: <span class="title">AnyObject</span>, <span class="title">subscriptionNumber</span>: <span class="title">String</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> hashTable = <span class="keyword">self</span>.existSubscriptionNumber(subscriptionNumber) &#123;</span><br><span class="line">            <span class="keyword">let</span> enumerator = hashTable.objectEnumerator()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> object:<span class="type">SubscriptionCenterProtocol</span> = enumerator.nextObject() <span class="keyword">as</span>? <span class="type">SubscriptionCenterProtocol</span> &#123;</span><br><span class="line">                    object.subscriptionMessage(message, subscriptionNumber: subscriptionNumber)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›å­˜åœ¨çš„è®¢é˜…ç”¨æˆ·</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">existSubscriptionNumber</span>(<span class="title">subscriptionNumber</span>: <span class="title">String</span>) -&gt; <span class="title">NSHashTable</span>? </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> subscriptionDictionary.objectForKey(subscriptionNumber) <span class="keyword">as</span>? <span class="type">NSHashTable</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h2><p>è®°å¾—è¦éµå®ˆSubscriptionCenterProtocolåè®®</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span>, <span class="title">SubscriptionCenterProtocol</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºæ‚å¿—TIMES</span></span><br><span class="line">        <span class="type">SubscriptionCenter</span>.createSubscriptionNumber(<span class="string">"TIMES"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ViewControlleå®šé˜…æ‚å¿—</span></span><br><span class="line">        <span class="type">SubscriptionCenter</span>.addCustomer(<span class="keyword">self</span>, subscriptionNumber: <span class="string">"TIMES"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘è¡Œæ‚å¿—TIMES</span></span><br><span class="line">        <span class="type">SubscriptionCenter</span>.sendMessage(<span class="string">"Swift"</span>, subscriptionNumber: <span class="string">"TIMES"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éµå®ˆSubscriptionCenterProtocolçš„ç”¨æˆ·æ”¶åˆ°æ‚å¿—TIMES</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">subscriptionMessage</span><span class="params">(message: AnyObject, subscriptionNumber: String)</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(message,subscriptionNumber)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Swift TIMES</span><br></pre></td></tr></table></figure>
<h1 id="ç³»ç»Ÿè‡ªå¸¦çš„é€šçŸ¥ä¸­å¿ƒ_NSNotificationCenter">ç³»ç»Ÿè‡ªå¸¦çš„é€šçŸ¥ä¸­å¿ƒ NSNotificationCenter</h1><p>åœ¨viewDidLoadé‡Œé¢</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ‚å¿—</span></span><br><span class="line">    <span class="type">NSNotificationCenter</span>.defaultCenter().addObserver(<span class="keyword">self</span>, selector: <span class="string">"notificationCenterEvent:"</span>, name: <span class="string">"MUSIC"</span>, object: <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘è¡Œæ‚å¿—</span></span><br><span class="line">    <span class="type">NSNotificationCenter</span>.defaultCenter().postNotificationName(<span class="string">"MUSIC"</span>, object: <span class="string">"Notification Message"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥æ”¶ç»“æœï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">notificationCenterEvent</span><span class="params">(sender: AnyObject)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(sender)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSConcreteNotification <span class="number">0</span>x7fb90ad4e860 &#123;name = MUSIC; object = Notification Message&#125;</span><br></pre></td></tr></table></figure>
<h1 id="KVO_é”®å€¼è§‚å¯Ÿ">KVO é”®å€¼è§‚å¯Ÿ</h1><p>åˆ›å»ºè‡ªå®šä¹‰ç±»ï¼Œæ³¨æ„å±æ€§å‰è¦åŠ dynamic</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">   dynamic <span class="keyword">var</span> name: <span class="type">String</span>?</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨viewDidLoadé‡Œé¢</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> model: <span class="type">Model</span>!</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">    model = <span class="type">Model</span>()</span><br><span class="line">    model.addObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"name"</span>, options: <span class="type">NSKeyValueObservingOptions</span>.<span class="type">New</span>, context: <span class="literal">nil</span>)</span><br><span class="line">    model.name = <span class="string">"Swift"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥æ”¶ç»“æœï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">observeValueForKeyPath</span><span class="params">(keyPath: String?, ofObject object: AnyObject?, change: [String : AnyObject]?, context: UnsafeMutablePointer&lt;Void&gt;)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(change)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœæ‰“å°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional([<span class="string">"new"</span>: Swift, <span class="string">"kind"</span>: <span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°ä¸‹é¢é”™è¯¯ï¼Œé‚£æ˜¯ç”±äºæ²¡æŠŠmodelæ”¾åœ¨å…¨å±€å˜é‡ä¸­</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*** <span class="type">Terminating</span> app due to uncaught exception '<span class="type">NSInternalInconsistencyException'</span>, reason: '<span class="type">An</span> instance <span class="number">0x7f9c12d2efe0</span> of <span class="class"><span class="keyword">class</span> <span class="title">ChuangChuang_2_0</span>.<span class="title">Model</span> <span class="title">was</span> <span class="title">deallocated</span> <span class="title">while</span> <span class="title">key</span> <span class="title">value</span> <span class="title">observers</span> <span class="title">were</span> <span class="title">still</span> <span class="title">registered</span> <span class="title">with</span> <span class="title">it</span>. <span class="title">Current</span> <span class="title">observation</span> <span class="title">info</span>: &lt;<span class="title">NSKeyValueObservationInfo</span> 0<span class="title">x7f9c12c07660</span>&gt; (</span><br><span class="line">&lt;<span class="title">NSKeyValueObservance</span> 0<span class="title">x7f9c12c0f600</span>: <span class="title">Observer</span>: 0<span class="title">x7f9c140aad10</span>, <span class="title">Key</span> <span class="title">path</span>: <span class="title">name</span>, <span class="title">Options</span>: &lt;<span class="title">New</span>: <span class="title">YES</span>, <span class="title">Old</span>: <span class="title">NO</span>, <span class="title">Prior</span>: <span class="title">NO</span>&gt; <span class="title">Context</span>: 0<span class="title">x0</span>, <span class="title">Property</span>: 0<span class="title">x7f9c12d2f5e0</span>&gt;</span><br><span class="line">)'</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="è‡ªå·²å®ç°ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼">è‡ªå·²å®ç°ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼</h1><p>å®ç°ä¸€ä¸ªç±»ä¼¼ç°å®ç”Ÿæ´»ä¸­ä¹¦åˆŠå‘è¡Œçš„æ¨¡å¼ï¼Œ<code>æ‚å¿—ç¤¾</code> å‘è¡Œç®¡ç†æ‚å¿—, <code>æ‚å¿—</code>æœ‰æ‚å¿—å·ï¼Œ<code>è¯»è€…</code>è®¢é˜…æ‚å¿—ã€‚</p>
<h2 id="åˆ›å»ºå®š]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Xcode ä½¿ç”¨Githubæ‰˜ç®¡ä»£ç ]]></title>
    <link href="http://lecason.com/2015/09/27/xcode-about-git/"/>
    <id>http://lecason.com/2015/09/27/xcode-about-git/</id>
    <published>2015-09-26T17:08:29.000Z</published>
    <updated>2015-09-28T05:19:54.000Z</updated>
    <content type="html"><![CDATA[<h1 id="Xcode_Push_é¡¹ç›®åˆ°_GitHub">Xcode Push é¡¹ç›®åˆ° GitHub</h1><blockquote>
<p>Mac 10.10.5 (14F27)<br>Xcode Version 7.1 beta (7B60)</p>
</blockquote>
<h2 id="åˆ›å»ºRepositories">åˆ›å»ºRepositories</h2><p>åœ¨<code>Github</code>ä¸Šåˆ›å»ºRepositories</p>
<p><img src="/img/xcodegithub1.png" alt=""></p>
<p>åœ¨<code>Xcode</code>ä¸­æ–°å»ºé¡¹ç›®ï¼Œå‹¾é€‰ <code>Create Git repositories on My Mac</code></p>
<p><img src="/img/xcodegithub3.png" alt=""></p>
<p>å¦‚æœå·²ç»æ–°å»ºäº†çš„é¡¹ç›®ä½†æ²¡å‹¾é€‰<code>Create Git repositories on My Mac</code>çš„å¯ä»¥åœ¨<code>Xcode</code> - <code>Source Control</code> ä¸­é€‰æ‹© <code>Create Working Copy</code></p>
<p><img src="/img/xcodegithub2.png" alt=""></p>
<p>é€‰æ‹© <code>Xcode</code> - <code>Source Control</code> - <code>Project Name Master</code> - <code>Configure Project Name</code> - <code>Remotes</code> - <code>+</code> - <code>Add Remote</code> </p>
<p><img src="/img/xcodegithub4.png" alt=""></p>
<p>ç„¶åå†åœ¨Source Controlé‡Œé¢Pushå°±å¯ä¸Šä¼ åˆ°Githubä¸Šé¢å»äº†</p>
<p><img src="/img/xcodegithub5.png" alt=""></p>
<p>è¿™æ—¶å€™Githubä¸Šå°±å¯ä»¥çœ‹åˆ°å·²ç»Pushä¸Šå»çš„æ–‡ä»¶äº†</p>
<p><img src="/img/xcodegithub6.png" alt=""></p>
<h2 id="æäº¤Commint">æäº¤Commint</h2><p>Commintçš„æ„æ€æ˜¯å…ˆæŠŠä»£ç ä¿å­˜åœ¨æœ¬åœ°ï¼Œå¦‚æœè¦æ›´æ–°åˆ°æœåŠ¡å™¨çš„è¯ï¼Œå°±Pushä¸Šå»ï¼Œæˆ‘ä»¬åœ¨viewDidLoadé‡Œé¢print(â€œHelloâ€)ç„¶åå† <code>Xcoode</code> - <code>Source Control</code> - <code>Commint</code> ï¼Œè¿™æ ·å­ä»£ç å°±ä¿å­˜å¥½åœ¨æœ¬åœ°ï¼Œç„¶åå†ç‚¹<code>Xcoode</code> - <code>Source Control</code> - <code>Push</code>,è¿™æ—¶å€™ä»£ç å°±ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚æ•ˆæœï¼š</p>
<p><img src="/img/xcodegithub7.png" alt=""></p>
<h2 id="æ›´æ–°é¡¹ç›®Pull">æ›´æ–°é¡¹ç›®Pull</h2><p>å¦‚æœå…¶ä»–äººä¿®æ”¹äº†æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦å¾—åˆ°æœåŠ¡å™¨ä¸Šæœ€æ–°çš„æ–‡ä»¶æˆ‘ä»¬å°±è¦Pullå›æ¥ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘ViewController.swift,åœ¨print(â€œHelloâ€)é‡Œé¢åŠ ä¸Šä¸€ä¸ªWorldã€‚ç„¶åä¿å­˜Commint Changesï¼š</p>
<p><img src="/img/xcodegithub8.png" alt=""></p>
<p>è¿™æ—¶å€™æˆ‘ä»¬åœ¨<code>Xcode</code> - <code>Source Control</code> - <code>Pull</code>,æˆ‘ä»¬å°±èƒ½å¾—åˆ°æœåŠ¡å™¨ä¸Šæ›´æ–°çš„ä»£ç ï¼š</p>
<p><img src="/img/xcodegithub9.png" alt=""></p>
<h1 id="ä»_GitHub_ä¸‹è½½é¡¹ç›®åˆ°æœ¬åœ°">ä» GitHub ä¸‹è½½é¡¹ç›®åˆ°æœ¬åœ°</h1><p>ä»<code>Xcode</code> - <code>Source Control</code> é‡Œé¢é€‰æ‹© <code>Check Out</code> ï¼Œè¾“å…¥Githubä¸Šçš„åœ°å€åå†ä¿å­˜åˆ°æœ¬åœ°</p>
<p><img src="/img/xcodegithub10.png" alt=""></p>
<h1 id="å¸¸è§é”™è¯¯">å¸¸è§é”™è¯¯</h1><p>å¦‚æœå‡ºç°ä¸‹é¢ï¼Œé‚£å¯èƒ½æ˜¯Xcode 7çš„ä¸€ä¸ªBug</p>
<p><img src="/img/xcodegithub11.png" alt=""></p>
<p>åˆ‡æ¢åˆ°å·¥ä½œç›®å½•è¾“å…¥,æ³¨æ„<code>--local</code>å‚æ•°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> my/project/directory  </span><br><span class="line">git config --local user.email <span class="string">"lecason@me.com"</span>  </span><br><span class="line">git config --local user.name <span class="string">"lecason"</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Xcode_Push_é¡¹ç›®åˆ°_GitHub">Xcode Push é¡¹ç›®åˆ° GitHub</h1><blockquote>
<p>Mac 10.10.5 (14F27)<br>Xcode Version 7.1 beta (7B60)</p>
</blockquo]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS é™å®šUIPageViewControlleræ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«åŒºåŸŸ]]></title>
    <link href="http://lecason.com/2015/09/25/restrict-uipageview-panning-area/"/>
    <id>http://lecason.com/2015/09/25/restrict-uipageview-panning-area/</id>
    <published>2015-09-25T02:16:19.000Z</published>
    <updated>2015-09-25T02:57:06.000Z</updated>
    <content type="html"><![CDATA[<p>åšé¡¹ç›®çš„æ—¶å€™æœ‰ä¸ªéœ€æ±‚ï¼Œä¸­é—´éƒ¨ä»½è¦æ˜¾ç¤ºå›¾è¡¨ï¼Œå›¾è¡¨æ˜¯å¯ä»¥æ‰‹åŠ¿è¯†åˆ«ç‚¹å‡»æ”¾å¤§ç¼©å°çš„ï¼Œå’ŒUIPageViewControllerçš„æ‰‹åŠ¿å†²çªäº†ã€‚è¿™æ—¶å€™å°±è¦é™å®šPageViewControllerçš„è¯†åˆ«åŒºåŸŸäº†ã€‚</p>
<h2 id="å­ç±»åŒ–UIPageViewControllerçš„æ–¹æ³•">å­ç±»åŒ–UIPageViewControllerçš„æ–¹æ³•</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">UIKit</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HWPageViewController</span>: <span class="title">UIPageViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºæ‰‹åŠ¿å¹¶éµå®ˆåè®®</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">UIKit</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> scrollViewPanGestureRecognzier: <span class="type">UIPanGestureRecognizer</span>!</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HWPageViewController</span>: <span class="title">UIPageViewController</span>,<span class="title">UIGestureRecognizerDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŠ å…¥ä»£ç† </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> view <span class="keyword">in</span> <span class="keyword">self</span>.view.subviews &#123;</span><br><span class="line">        <span class="keyword">if</span> view.isKindOfClass(<span class="type">UIScrollView</span>.<span class="keyword">self</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> scrollView: <span class="type">UIScrollView</span> = view <span class="keyword">as</span>! <span class="type">UIScrollView</span></span><br><span class="line">                scrollViewPanGestureRecognzier = <span class="type">UIPanGestureRecognizer</span>()</span><br><span class="line">                scrollViewPanGestureRecognzier.delegate = <span class="keyword">self</span></span><br><span class="line">                scrollView.addGestureRecognizer(scrollViewPanGestureRecognzier)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°ä»£ç†æ·»åŠ è¯†åˆ«åŒºåŸŸ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">gestureRecognizer</span><span class="params">(gestureRecognizer: UIGestureRecognizer, shouldRecognizeSimultaneouslyWithGestureRecognizer otherGestureRecognizer: UIGestureRecognizer)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">gestureRecognizerShouldBegin</span><span class="params">(gestureRecognizer: UIGestureRecognizer)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">if</span> gestureRecognizer == scrollViewPanGestureRecognzier &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> restrictValue:<span class="type">CGFloat</span> = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ‡è¯†ä¸å¯æ»‘åŠ¨åŒºåŸŸ</span></span><br><span class="line">    <span class="keyword">var</span> recognizerView: <span class="type">UIView</span> = <span class="type">UIView</span>(frame: <span class="type">CGRectMake</span>(<span class="number">0</span>, <span class="number">100</span>, <span class="keyword">self</span>.view.frame.width, <span class="keyword">self</span>.view.frame.height - <span class="number">100</span>))</span><br><span class="line">    recognizerView.backgroundColor = <span class="type">UIColor</span>.darkGrayColor()</span><br><span class="line">    <span class="keyword">self</span>.view.addSubview(recognizerView)</span><br><span class="line">    <span class="comment">// æ ‡è¯†</span></span><br><span class="line">    <span class="keyword">var</span> lb: <span class="type">UILabel</span> = <span class="type">UILabel</span>(frame: <span class="type">CGRectMake</span>(<span class="number">90</span>,<span class="number">180</span>, <span class="number">200</span>, <span class="number">50</span>))</span><br><span class="line">    lb.text = <span class="string">"ä¸å¯ä»¥æ»šåŠ¨çš„åŒºåŸŸ"</span></span><br><span class="line">    lb.textColor = <span class="type">UIColor</span>.whiteColor()</span><br><span class="line">    recognizerView.addSubview(lb)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> locationInView: <span class="type">CGPoint</span> = gestureRecognizer.locationInView(<span class="keyword">self</span>.view)</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">if</span>  locationInView.y &gt; restrictValue &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœ:</p>
<p><img src="/img/restrictpageviewcontrollerarea1.png" alt=""></p>
<h2 id="ä¸ç”¨å­ç±»åŒ–UIPageViewControllerçš„æ–¹æ³•">ä¸ç”¨å­ç±»åŒ–UIPageViewControllerçš„æ–¹æ³•</h2><p>åªè¦åœ¨å®ç°UIPageViewControllerDataSourceçš„ç±»é‡Œé¢çš„Controlleré‡Œé¢åŠ ä¸Šæ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HWRootViewController</span>: <span class="title">UIViewController</span>,<span class="title">UIPageViewControllerDataSource</span>,<span class="title">UIGestureRecognizerDelegate</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>åªè¦åŠ ä¸Šä¸‹é¢ä»£ç å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> gestureView = <span class="type">UIView</span>(frame: <span class="type">CGRect</span>(x:<span class="number">0</span>, y:<span class="keyword">self</span>.view.frame.height - <span class="number">180</span>, width:<span class="keyword">self</span>.view.frame.width, height:<span class="number">180</span>))</span><br><span class="line">    gestureView.backgroundColor = <span class="type">UIColor</span>(red: <span class="number">255</span>, green: <span class="number">255</span>, blue: <span class="number">255</span>, alpha: <span class="number">0.1</span>)</span><br><span class="line">    <span class="keyword">self</span>.view.addSubview(gestureView)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="keyword">self</span>.pageVC!.view.subviews &#123;</span><br><span class="line">        <span class="keyword">if</span> x <span class="keyword">is</span> <span class="type">UIScrollView</span> &#123;</span><br><span class="line">            gestureView.addGestureRecognizer(x.panGestureRecognizer)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªæœ‰ä¸‹é¢æµ…ç™½è‰²é‚£å±‚æ‰èƒ½æ»‘åŠ¨ç¿»é¡µï¼Œæ•ˆæœï¼š</p>
<p><img src="/img/restrictpageviewcontrollerarea2.png" alt=""></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>åšé¡¹ç›®çš„æ—¶å€™æœ‰ä¸ªéœ€æ±‚ï¼Œä¸­é—´éƒ¨ä»½è¦æ˜¾ç¤ºå›¾è¡¨ï¼Œå›¾è¡¨æ˜¯å¯ä»¥æ‰‹åŠ¿è¯†åˆ«ç‚¹å‡»æ”¾å¤§ç¼©å°çš„ï¼Œå’ŒUIPageViewControllerçš„æ‰‹åŠ¿å†²çªäº†ã€‚è¿™æ—¶å€™å°±è¦é™å®šPageViewControllerçš„è¯†åˆ«åŒºåŸŸäº†ã€‚</p>
<h2 id="å­ç±»åŒ–UIPageViewControllerçš„æ–¹æ³•]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Debug PageControl é”™ä¹±é—®é¢˜]]></title>
    <link href="http://lecason.com/2015/09/24/debug-uipageviewcontroller-and-uipagecontrol/"/>
    <id>http://lecason.com/2015/09/24/debug-uipageviewcontroller-and-uipagecontrol/</id>
    <published>2015-09-24T09:17:21.000Z</published>
    <updated>2015-09-24T09:38:04.000Z</updated>
    <content type="html"><![CDATA[<p>ä»<code>AppCoda</code>ä¸Šçœ‹åˆ°çš„UIPageControllerçš„Demo,é‡Œé¢PageViewController Delegateé‡Œé¢æœ‰ä¸€æ¡ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">NSInteger</span>)presentationIndexForPageViewController:(<span class="built_in">UIPageViewController</span> *)pageViewController</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‘ç°å¦‚æœè¿™æ ·å­ç”¨çš„è¯ï¼Œå¦‚æœä½ åœ¨UIPageControlé‡Œé¢å‘å·¦æ»‘ï¼Œä½†åœ¨ä¸»å›¾ç‰‡ä¸Šé¢å‘å³æ»‘ï¼Œä¼šå‘ç”Ÿ<code>Indicator</code>é”™ä¹±ï¼Œå¦‚ä¸‹å›¾ï¼Œç‚¹åœ¨ç¬¬2çš„ä½ç½®ï¼Œä½†å›¾ç‰‡å·²ç»æ˜¯æœ€åçš„å›¾ç‰‡ï¼Œå·²ç»ä¸èƒ½å†å‘å·¦æ»‘ã€‚</p>
<p><img src="/img/pagecontolbug1.png" alt=""></p>
<p>è¿™æ—¶å€™æ”¹æˆä¸‹é¢å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">NSInteger</span>)presentationIndexForPageViewController:(<span class="built_in">UIPageViewController</span> *)pageViewController</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> [(PageContentViewController *)[pageViewController<span class="variable">.viewControllers</span> firstObject] pageIndex];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<p>ä»<code>AppCoda</code>ä¸Šçœ‹åˆ°çš„UIPageControllerçš„Demo,é‡Œé¢PageViewController Delegateé‡Œé¢æœ‰ä¸€æ¡ï¼š</p>
<figure class="highlight objectivec"><table><tr><t]]>
    </summary>
    
      <category term="Debug" scheme="http://lecason.com/tags/Debug/"/>
    
      <category term="Debug" scheme="http://lecason.com/categories/Debug/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS å…³äºå¯¼èˆªæ å’ŒUIAppearanceç±»]]></title>
    <link href="http://lecason.com/2015/09/24/about-navigation/"/>
    <id>http://lecason.com/2015/09/24/about-navigation/</id>
    <published>2015-09-24T07:03:05.000Z</published>
    <updated>2015-09-24T08:54:08.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ç»Ÿä¸€è®¾ç½®å¯¼èˆªæ é¢œè‰²">ç»Ÿä¸€è®¾ç½®å¯¼èˆªæ é¢œè‰²</h2><p>ä¸ºäº†ç»Ÿä¸€è®¾ç½®å¯¼èˆªæ çš„èƒŒæ™¯é¢œè‰²,åœ¨UIAppearanceè¿™ä¸ªåè®®é‡Œé¢æ‰¾åˆ°äº†ä¸€äº›æ–¹æ³•ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">UIAppearance</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºè‡ªå®šä¹‰ç±»çš„æ‰€æœ‰å®ä¾‹çš„å¤–è§‚ï¼Œå°†ç›¸å…³çš„å¤–è§‚ä¿®æ”¹æ¶ˆæ¯å‘é€ç»™è¯¥ç±»çš„å¤–è§‚ä»£ç†ã€‚</span></span><br><span class="line"><span class="comment">// ä¾‹å¦‚ï¼Œä¿®æ”¹æ‰€æœ‰UINavigationBarã€å®ä¾‹çš„é¢œè‰²ï¼š</span></span><br><span class="line"><span class="comment">// [[UINavigationBar appearance] setBarTintColor:myColor];</span></span><br><span class="line"></span><br><span class="line">+ (instancetype)appearance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>Swift ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">UINavigationBar</span>.appearance().backgroundColor = <span class="type">UIColor</span>.greenColor()</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è®¾ç½®å¯¼èˆªæ åœ¨æŸä¸ªç±»ä¸‹çš„é¢œè‰²">è®¾ç½®å¯¼èˆªæ åœ¨æŸä¸ªç±»ä¸‹çš„é¢œè‰²</h2><p>Objective-C ä¹Ÿå¯ä»¥è®¾ç½®åŒ…æ‹¬åœ¨æŸè¡¨çˆ¶ç±»é‡Œé¢æ‰è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="built_in">UINavigationBar</span> appearanceWhenContainedIn:[<span class="built_in">UITabBarController</span> class], [<span class="built_in">UISplitViewController</span> class], <span class="literal">nil</span>] setBarTintColor:myTabbedNavBarColor];</span><br></pre></td></tr></table></figure>
<p>Swift iOS9 ä½¿ç”¨æ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UINavigationBar</span>.appearanceWhenContainedInInstancesOfClasses([<span class="type">MyViewController</span>.<span class="keyword">self</span>]).backgroundColor = <span class="type">UIColor</span>.greenColor()</span><br></pre></td></tr></table></figure>
<p>Swift iOS 7 - 8 ä½¿ç”¨æ–¹æ³•</p>
<p>è¿™ä¸ªæ–¹æ³•åœ¨7 - 8  é‡Œé¢ä¸å¯ä»¥ç”¨ï¼Œåªèƒ½è‡ªå·²åˆ›å»ºä¸€ä¸ªç±»åˆ«ï¼Œä¸‹é¢æ˜¯UIViewçš„ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIAppearance+Swift.h</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIView</span> (<span class="title">UIViewAppearance_Swift</span>)</span></span><br><span class="line"><span class="comment">// appearanceWhenContainedIn: is not available in Swift. This fixes that.</span></span><br><span class="line">+ (instancetype)my_appearanceWhenContainedIn:(Class&lt;<span class="built_in">UIAppearanceContainer</span>&gt;)containerClass;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line">â€”</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIAppearance+Swift.m</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIView</span> (<span class="title">UIViewAppearance_Swift</span>)</span></span><br><span class="line">+ (instancetype)my_appearanceWhenContainedIn:(Class&lt;<span class="built_in">UIAppearanceContainer</span>&gt;)containerClass &#123;</span><br><span class="line"><span class="keyword">return</span> [<span class="keyword">self</span> appearanceWhenContainedIn:containerClass, <span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨Swiftæ¡¥æ–‡ä»¶é‡Œé¢å¼•å…¥ <code>#import &quot;UIAppearance+Swift.h&quot;</code> ç„¶åå°±å¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UITextField</span>.my_appearanceWhenContainedIn(<span class="type">MyViewController</span>.<span class="keyword">self</span>).keyboardAppearance = .<span class="type">Light</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™çš„æ•ˆæœæ˜¯è¿™æ ·å­çš„ï¼š</p>
<p><img src="/img/aboutnavigation1.png" alt=""></p>
<h2 id="å»æ‰å¯¼èˆªæ ç£¨ç ‚æ•ˆæœ">å»æ‰å¯¼èˆªæ ç£¨ç ‚æ•ˆæœ</h2><p>å¦‚æœæƒ³å»æ‰navigationBarçš„ç£¨ç ‚æ•ˆæœï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">UINavigationBar</span>.appearance().backgroundColor = <span class="type">UIColor</span>.greenColor()</span><br><span class="line">    <span class="type">UINavigationBar</span>.appearance().setBackgroundImage(<span class="type">UIImage</span>.<span class="keyword">new</span>(), forBarMetrics: <span class="type">UIBarMetrics</span>.<span class="type">Default</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™çš„æ•ˆæœæ˜¯è¿™æ ·å­çš„ï¼š</p>
<p><img src="/img/aboutnavigation2.png" alt=""></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="ç»Ÿä¸€è®¾ç½®å¯¼èˆªæ é¢œè‰²">ç»Ÿä¸€è®¾ç½®å¯¼èˆªæ é¢œè‰²</h2><p>ä¸ºäº†ç»Ÿä¸€è®¾ç½®å¯¼èˆªæ çš„èƒŒæ™¯é¢œè‰²,åœ¨UIAppearanceè¿™ä¸ªåè®®é‡Œé¢æ‰¾åˆ°äº†ä¸€äº›æ–¹æ³•ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Xcode 6 åˆ›å»ºç©ºçš„é¡¹ç›®æ¨¡ç‰ˆ]]></title>
    <link href="http://lecason.com/2015/09/23/xcode6-single-view-application-to-empty-application/"/>
    <id>http://lecason.com/2015/09/23/xcode6-single-view-application-to-empty-application/</id>
    <published>2015-09-23T14:12:46.000Z</published>
    <updated>2015-09-23T15:31:59.000Z</updated>
    <content type="html"><![CDATA[<p>è¿è¡ŒXcode 6ï¼Œåˆ›å»ºä¸€ä¸ªSingle View Applicationå·¥ç¨‹ã€‚</p>
<p><code>Xcode</code> - <code>Shift + Command + N</code> - <code>Single View Applicaton</code></p>
<p>åˆ›å»ºå¥½åï¼ŒæŠŠå·¥ç¨‹ç›®å½•ä¸‹çš„Main.storyboardå’ŒLaunchScreen.xibåˆ é™¤ï¼Œæ‰”è¿›åºŸçº¸ç¯“ã€‚</p>
<p><code>Delete</code> - <code>Main.storyboard</code> + <code>LaunchScreen.xib</code></p>
<p>æ‰“å¼€Info.plistï¼ŒæŠŠLaunch screen interface file base nameï¼Œä»¥åŠMain storyboard file base nameä¸¤é¡¹ï¼Œåˆ é™¤ï¼ˆç‚¹å‡»æ—è¾¹çš„å‡å·å³å¯ï¼‰ã€‚</p>
<p><code>Delete</code> - <code>Launch screen interface file base name</code> + <code>Main storyboard file base name</code></p>
<p>æ‰“å¼€å·¥ç¨‹é¡¹ç›®å±æ€§æ–‡ä»¶ï¼Œç‚¹å‡»Targetä¸‹é¢çš„ç¬¬ä¸€é¡¹ï¼Œå†é€‰æ‹©Generalé€‰é¡¹å¡ï¼Œå‘ä¸‹æ‰¾åˆ°Use Asset CatalogæŒ‰é’®ã€‚ç‚¹å‡»å®ƒã€‚</p>
<p><code>Project</code> - <code>TARGETS</code> - <code>Genera</code> - <code>App Icons and Launch Images</code> - <code>Use Asset Catelog</code></p>
<p>æœ€åï¼Œåœ¨AppDelegateçš„ç¬¬ä¸€ä¸ªæ–¹æ³•é‡Œé¢ï¼Œâ€œreturnâ€è¯­å¥ä¹‹å‰ï¼Œæ·»åŠ å¿…è¦ä»£ç ã€‚<br>ä»£ç åªæœ‰3å¥ï¼Œç›¸å½“äºåˆ†3æ­¥èµ°ã€‚1.åˆ›å»ºwindowï¼›2.è®¾ç½®windowèƒŒæ™¯ï¼›3.ä½¿windowå¯è§ã€‚</p>
<p>Objective-C</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span><span class="variable">.window</span> = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[[<span class="built_in">UIScreen</span> mainScreen] bounds]];</span><br><span class="line"><span class="keyword">self</span><span class="variable">.window</span><span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">[<span class="keyword">self</span><span class="variable">.window</span> makeKeyAndVisible];</span><br></pre></td></tr></table></figure>
<p>Swift</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.window = <span class="type">UIWindow</span>(frame: <span class="type">UIScreen</span>.mainScreen().bounds)</span><br><span class="line"><span class="keyword">self</span>.window?.backgroundColor = <span class="type">UIColor</span>.whiteColor()</span><br><span class="line"><span class="keyword">self</span>.window?.makeKeyAndVisible()</span><br></pre></td></tr></table></figure>
<p>Swift åˆ›å»º Navigation Controller å’Œ Tab Bar Controller Programmatically</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> first: <span class="type">UIViewController</span> = <span class="type">UIViewController</span>()</span><br><span class="line">    <span class="keyword">var</span> second: <span class="type">UIViewController</span> = <span class="type">UIViewController</span>()</span><br><span class="line">    <span class="keyword">var</span> firstNav: <span class="type">UINavigationController</span> = <span class="type">UINavigationController</span>(rootViewController: first)</span><br><span class="line">    first.title = <span class="string">"First"</span></span><br><span class="line">    <span class="keyword">var</span> secondNav: <span class="type">UINavigationController</span> = <span class="type">UINavigationController</span>(rootViewController: second)</span><br><span class="line">    second.title = <span class="string">"Second"</span></span><br><span class="line">    <span class="keyword">var</span> tab: <span class="type">UITabBarController</span> = <span class="type">UITabBarController</span>()</span><br><span class="line">    tab.viewControllers = [firstNav,secondNav]</span><br><span class="line">    <span class="keyword">self</span>.window = <span class="type">UIWindow</span>(frame: <span class="type">UIScreen</span>.mainScreen().bounds)</span><br><span class="line">    <span class="keyword">self</span>.window?.backgroundColor = <span class="type">UIColor</span>.whiteColor()</span><br><span class="line">    <span class="keyword">self</span>.window?.rootViewController = tab</span><br><span class="line">    <span class="keyword">self</span>.window?.makeKeyAndVisible()</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p>è¿è¡ŒXcode 6ï¼Œåˆ›å»ºä¸€ä¸ªSingle View Applicationå·¥ç¨‹ã€‚</p>
<p><code>Xcode</code> - <code>Shift + Command + N</code> - <code>Single View Applicaton</cod]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[CentOS æ¨ªè·¨å¤§å¹³æ´‹]]></title>
    <link href="http://lecason.com/2015/09/22/Mac-Cross-The-River/"/>
    <id>http://lecason.com/2015/09/22/Mac-Cross-The-River/</id>
    <published>2015-09-22T04:59:36.000Z</published>
    <updated>2015-09-28T05:21:35.000Z</updated>
    <content type="html"><![CDATA[<p>æƒ³è¦æ¨ªè·¨å¤ªå¹³æ´‹ï¼Œé¦–å…ˆè¦å®‰è£… </p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install build-essential autoconf libtool libssl-dev wget zip unzip openssl-devel gcc</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¸‹è½½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://codeload.github.com/lecason/shadowsocks-libev/zip/master</span><br></pre></td></tr></table></figure>
<p>è§£å‹è¿›å…¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip master</span><br><span class="line"><span class="built_in">cd</span> shadowsocks-libev-master</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ./configure</span><br></pre></td></tr></table></figure>
<p>å‡ºç°ä¸‹é¢è¾“å‡ºè¡¨ç¤ºconfigureæˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">configure: creating ./config.status</span><br><span class="line">config.status: creating Makefile</span><br><span class="line">config.status: creating dist-build/Makefile</span><br><span class="line">config.status: creating msvc-scripts/Makefile</span><br><span class="line">config.status: creating src/Makefile</span><br><span class="line">config.status: creating src/libsodium/Makefile</span><br><span class="line">config.status: creating src/libsodium/include/Makefile</span><br><span class="line">config.status: creating src/libsodium/include/sodium/version.h</span><br><span class="line">config.status: executing depfiles commands</span><br><span class="line">config.status: executing libtool commands</span><br></pre></td></tr></table></figure>
<p>ç„¶åmake</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p>çª—å£é‡Œå¼€èˆ¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/ss-server <span class="operator">-s</span> <span class="number">0.0</span>.<span class="number">0.0</span> -p <span class="number">8888</span> -k lecason -m aes-<span class="number">256</span>-cfb</span><br></pre></td></tr></table></figure>
<p>åå°å¼€èˆ¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup /usr/<span class="built_in">local</span>/bin/ss-server <span class="operator">-s</span> IPåœ°å€ -p ç«¯å£ -k å¯†ç  -m åŠ å¯†æ–¹å¼ &amp;</span><br></pre></td></tr></table></figure>
<p>å¼€æœºå°±å¼€èˆ¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"nohup /usr/local/bin/ss-server -s IPåœ°å€ -p ç«¯å£ -k å¯†ç  -m åŠ å¯†æ–¹å¼ &amp;"</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure>
<p>æ‰¾èˆ¹ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps</span><br></pre></td></tr></table></figure>
<p>ä¼šçœ‹åˆ° </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">20829</span> pts/<span class="number">0</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> ss-server</span><br></pre></td></tr></table></figure>
<p>å†Kill </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> <span class="number">20829</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p>æƒ³è¦æ¨ªè·¨å¤ªå¹³æ´‹ï¼Œé¦–å…ˆè¦å®‰è£… </p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS æ—¥æœŸåŠ ä¸€å¤©]]></title>
    <link href="http://lecason.com/2015/09/21/iOS-Add-One-Day-in-NSdate/"/>
    <id>http://lecason.com/2015/09/21/iOS-Add-One-Day-in-NSdate/</id>
    <published>2015-09-21T01:52:05.000Z</published>
    <updated>2015-09-21T03:12:56.000Z</updated>
    <content type="html"><![CDATA[<p>Swift æ—¥æœŸåŠ ä¸€å¤©</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">nextDay</span> <span class="params">()</span></span> -&gt; (<span class="type">String</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> components = <span class="type">NSDateComponents</span>()</span><br><span class="line">    components.day = <span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> expirationDate = <span class="type">NSCalendar</span>.currentCalendar().dateByAddingComponents(components,</span><br><span class="line">    toDate: date, options: <span class="type">NSCalendarOptions</span>(<span class="number">0</span>))</span><br><span class="line">    date = expirationDate</span><br><span class="line">    <span class="keyword">var</span> formatter = <span class="type">NSDateFormatter</span>()</span><br><span class="line">    formatter.dateFormat = <span class="string">"yyyy-MM-dd"</span></span><br><span class="line">    <span class="keyword">return</span> formatter.stringFromDate(expirationDate!)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Formatterçš„ä¸€äº›æ ¼å¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.å¸¸ç”¨çš„æ ¼å¼</span><br><span class="line">[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yyyy-MM-dd HH:mm:ss EEEE"</span>];</span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">08</span> <span class="number">20</span>:<span class="number">58</span>:<span class="number">29</span> æ˜ŸæœŸäºŒ</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.å°†yyyyæ”¹æˆyyï¼Œå¹´ä»½åªæ˜¾ç¤ºåä¸¤ä½ã€‚æ³¨æ„ï¼šMè¡¨ç¤ºMonthï¼ŒæŒ‡æœˆä»½ï¼›mè¡¨ç¤ºminuteï¼ŒæŒ‡åˆ†é’Ÿï¼›ä¸¤è€…ä¸å¯æ··æ·†ã€‚</span><br><span class="line">[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yy-MM-dd HH:mm:ss EEEE"</span>];</span><br><span class="line"><span class="number">13</span>-<span class="number">10</span>-<span class="number">08</span> <span class="number">21</span>:<span class="number">01</span>:<span class="number">48</span> æ˜ŸæœŸäºŒ</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.å°†MMæ”¹æˆMï¼Œddæ”¹æˆdï¼Œå¦‚æœæœˆä»½å’Œæ—¥æœŸå‰é¢æœ‰<span class="number">0</span>ï¼Œå°†ä¼šæ¶ˆå¤±ã€‚</span><br><span class="line">[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yyyy-M-d HH:mm:ss EEEE"</span>];</span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">8</span> <span class="number">21</span>:<span class="number">03</span>:<span class="number">49</span> æ˜ŸæœŸäºŒ</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.å°†ddæ”¹æˆDDï¼Œåˆ™æ˜¾ç¤ºä»Šå¤©æ˜¯ä»Šå¹´çš„ç¬¬å‡ å¤©ã€‚</span><br><span class="line">[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yyyy-MM-DD HH:mm:ss EEEE"</span>];</span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">281</span> <span class="number">21</span>:<span class="number">11</span>:<span class="number">07</span> æ˜ŸæœŸäºŒ</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.å°†HHæ”¹æˆHï¼Œmmæ”¹æˆmï¼Œssæ”¹æˆsï¼Œåˆ™æ—¶åˆ†ç§’å‰é¢çš„<span class="number">0</span>å°†ä¼šæ¶ˆå¤±ã€‚</span><br><span class="line">[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yyyy-MM-dd H:m:s EEEE"</span>];</span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">08</span> <span class="number">21</span>:<span class="number">7</span>:<span class="number">19</span> æ˜ŸæœŸäºŒ</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.è‹¥å°†HHæ”¹æˆhhï¼Œåˆ™æ—¶é—´ç”±<span class="number">24</span>å°æ—¶åˆ¶å˜æˆ<span class="number">12</span>å°æ—¶åˆ¶ã€‚</span><br><span class="line">[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yyyy-MM-dd hh:mm:ss EEEE"</span>];</span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">08</span> <span class="number">09</span>:<span class="number">08</span>:<span class="number">40</span> æ˜ŸæœŸäºŒ</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.ä¸ºåŒºåˆ†<span class="number">12</span>å°æ—¶åˆ¶çš„ä¸Šä¸‹åˆï¼Œå¯ä»¥åœ¨ä¸­é—´åŠ ä¸ªa</span><br><span class="line">[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yyyy-MM-dd a hh:mm:ss EEEE"</span>];</span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">08</span> ä¸‹åˆ <span class="number">09</span>:<span class="number">17</span>:<span class="number">43</span> æ˜ŸæœŸäºŒ</span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.å°†EEEEæ”¹æˆEEï¼Œåˆ™æ˜ŸæœŸäºŒå˜æˆå‘¨äºŒ</span><br><span class="line">[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yyyy-MM-dd HH:mm:ss EE"</span>];</span><br><span class="line"><span class="number">2013</span>-<span class="number">10</span>-<span class="number">08</span> <span class="number">21</span>:<span class="number">15</span>:<span class="number">04</span> å‘¨äºŒ</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>.å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æŠŠå¹´æœˆæ—¥ä¸­é—´çš„-æ”¹æˆ/</span><br><span class="line">a[dateFormatter <span class="built_in">set</span>DateFormat:@<span class="string">"yyyy/MM/dd a hh:mm:ss EE"</span>];</span><br><span class="line"><span class="number">2013</span>/<span class="number">10</span>/<span class="number">08</span> ä¸‹åˆ <span class="number">09</span>:<span class="number">19</span>:<span class="number">03</span> å‘¨äºŒ</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<p>Swift æ—¥æœŸåŠ ä¸€å¤©</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</s]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS è®¾ç½®Labelçš„è¡Œé—´è· é¦–è¡Œç¼©è¿›]]></title>
    <link href="http://lecason.com/2015/09/18/iOS-Reset-Label-line-Space-Head-Index/"/>
    <id>http://lecason.com/2015/09/18/iOS-Reset-Label-line-Space-Head-Index/</id>
    <published>2015-09-18T02:54:51.000Z</published>
    <updated>2015-09-18T03:01:14.000Z</updated>
    <content type="html"><![CDATA[<p>Swift ç‰ˆæœ¬</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">resetContent</span><span class="params">(#text:String)</span></span> -&gt; (<span class="type">NSAttributedString</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> atributedString: <span class="type">NSMutableAttributedString</span> = <span class="type">NSMutableAttributedString</span>(string: text)</span><br><span class="line">    <span class="keyword">var</span> paragraphStyle: <span class="type">NSMutableParagraphStyle</span> = <span class="type">NSMutableParagraphStyle</span>()</span><br><span class="line">    paragraphStyle.alignment = <span class="type">NSTextAlignment</span>.<span class="type">Center</span></span><br><span class="line">    paragraphStyle.maximumLineHeight = <span class="number">60</span> <span class="comment">//æœ€å¤§çš„è¡Œé«˜</span></span><br><span class="line">    paragraphStyle.lineSpacing = <span class="number">5</span>  <span class="comment">//è¡Œè‡ªå®šä¹‰è¡Œé«˜åº¦</span></span><br><span class="line">    paragraphStyle.firstLineHeadIndent = <span class="number">0</span> <span class="comment">// é¦–è¡Œç¼©è¿›</span></span><br><span class="line">    atributedString.addAttribute(<span class="type">NSParagraphStyleAttributeName</span>, value: paragraphStyle, range:<span class="type">NSMakeRange</span>(<span class="number">0</span>, <span class="built_in">count</span>(text)))</span><br><span class="line">    <span class="keyword">return</span> atributedString</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Objective-C ç‰ˆæœ¬</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSAttributedString</span> *)resetContentText:(<span class="built_in">NSString</span> *)text</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableAttributedString</span> *attributedString = [[<span class="built_in">NSMutableAttributedString</span> alloc] initWithString:text];</span><br><span class="line">    <span class="built_in">NSMutableParagraphStyle</span> *paragraphStyle = [[<span class="built_in">NSMutableParagraphStyle</span> alloc] init];</span><br><span class="line">    paragraphStyle<span class="variable">.alignment</span> = <span class="built_in">NSTextAlignmentLeft</span>;</span><br><span class="line">    paragraphStyle<span class="variable">.maximumLineHeight</span> = <span class="number">60</span>;  <span class="comment">//æœ€å¤§çš„è¡Œé«˜</span></span><br><span class="line">    paragraphStyle<span class="variable">.lineSpacing</span> = <span class="number">5</span>;  <span class="comment">//è¡Œè‡ªå®šä¹‰è¡Œé«˜åº¦</span></span><br><span class="line">    [paragraphStyle setFirstLineHeadIndent: <span class="number">5</span>];<span class="comment">//é¦–è¡Œç¼©è¿› æ ¹æ®ç”¨æˆ·æ˜µç§°å®½åº¦åœ¨åŠ 5ä¸ªåƒç´ </span></span><br><span class="line">    [attributedString addAttribute:<span class="built_in">NSParagraphStyleAttributeName</span> value:paragraphStyle range:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>,text<span class="variable">.length</span>)];</span><br><span class="line">    <span class="keyword">return</span> attributedString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨çš„æ—¶å€™:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">label.attributedText = <span class="keyword">self</span>.resetContent(<span class="string">"Your String"</span>)</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<p>Swift ç‰ˆæœ¬</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</spa]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS åŸºç¡€è¯¾ç¨‹]]></title>
    <link href="http://lecason.com/2015/09/17/iOS-Study-Note/"/>
    <id>http://lecason.com/2015/09/17/iOS-Study-Note/</id>
    <published>2015-09-17T15:22:52.000Z</published>
    <updated>2015-09-17T16:11:15.000Z</updated>
    <content type="html"><![CDATA[<h2 id="UIWindow">UIWindow</h2><p>UIWindowçº§åˆ«æœ‰ä¸‰ä¸ªï¼Œçº§åˆ«æœ‰3ä¸ªï¼Œ<code>UIWindowLevelNormal</code> &lt; <code>UIWindowsLevelAlert</code> &lt; <code>UIWindowLevelStatusBar</code>,3ä¸ªå¯åŒæ—¶æ˜¾ç¤ºåœ¨å±å¹•ï¼Œæ¯ä¸ªçº§åˆ«å¯ä»¥åˆ›å»ºå¤šä¸ªï¼Œä½†åŒä¸ªçº§åˆ«åŒæ—¶åªæœ‰ä¸€ä¸ªèƒ½æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</p>
<p>åœ¨AppDelegateåˆ›å»ºçª—å£å¹¶æ˜¾ç¤ºï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.window</span> = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[[<span class="built_in">UIScreen</span> mainScreen] bounds]];</span><br><span class="line">    RootViewController *rootVC =[[RootViewController alloc] init];</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.window</span><span class="variable">.rootViewController</span> = rootVC;</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.window</span> makeKeyAndVisible];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="UIView">UIView</h2><p>åˆ›å»ºä¸€ä¸ªView</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIView</span> *view = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">view<span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">view<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> blueColor];</span><br></pre></td></tr></table></figure>
<p>iPhoneå±å¹•çš„å°ºå¯¸</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span> --------------------------------------------------</span><br><span class="line"></span><br><span class="line">3GS        3.5'    320 <span class="keyword">*</span> 480     <span class="comment">@1x  -   320 * 480</span></span><br><span class="line">4/4S       3.5'    320 <span class="keyword">*</span> 480     <span class="comment">@2x  -   640 * 960</span></span><br><span class="line">5/5c/5s    4.0'    320 <span class="keyword">*</span> 568     <span class="comment">@2x  -   640 * 1136</span></span><br><span class="line">6          4.7'    375 <span class="keyword">*</span> 667     <span class="comment">@2x  -   750 * 1344</span></span><br><span class="line">6p         5.5'    414 <span class="keyword">*</span> 736     <span class="comment">@3x  -  1242 * 2208</span></span><br><span class="line"></span><br><span class="line">status bar         22</span><br><span class="line"></span><br><span class="line">----------------------------------------------------<span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<blockquote>
<p>bounds è¾¹æ¡†å¤§å°ï¼Œbounds.size.x , bounds.size.y æ°¸è¿œä¸º0</p>
</blockquote>
<p>å¾—åˆ°Viewçš„çˆ¶è§†å›¾</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIView</span> *superView = view<span class="variable">.superview</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åæ ‡æ˜¯æ ¹æ®çˆ¶è§†å›¾çš„ä½ç½®æ¥è®¾ç½®çš„ï¼Œä¸ä¼šè·¨å±‚</p>
</blockquote>
<p> å¾—åˆ°Viewçš„å­è§†å›¾</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *subViews = view<span class="variable">.subviews</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">UIView</span> *view <span class="keyword">in</span> subViews) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,view);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡è®¾ç½®View Tag å€¼æ¥å¾—åˆ°å¯¹åº”çš„å­è§†å›¾</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">view<span class="variable">.tag</span> = <span class="number">0</span></span><br><span class="line"><span class="built_in">UIView</span> *otherview = [superView viewWithTag:<span class="number">0</span>];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åŒä¸€ä¸ªçˆ¶è§†å›¾ä¸­ï¼Œå…ˆåŠ å…¥çš„Viewä¼šè¢«è¦†ç›–åœ¨ä¸‹é¢</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="UIWindow">UIWindow</h2><p>UIWindowçº§åˆ«æœ‰ä¸‰ä¸ªï¼Œçº§åˆ«æœ‰3ä¸ªï¼Œ<code>UIWindowLevelNormal</code> &lt; <code>UIWindowsLevelAlert</code> &lt; <code>UIWi]]>
    </summary>
    
      <category term="Study" scheme="http://lecason.com/tags/Study/"/>
    
      <category term="Note" scheme="http://lecason.com/categories/Note/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Debug Linker command failed è¿æ¥å‘½ä»¤å¤±è´¥]]></title>
    <link href="http://lecason.com/2015/09/17/Debug-linker-command-failed/"/>
    <id>http://lecason.com/2015/09/17/Debug-linker-command-failed/</id>
    <published>2015-09-17T02:16:32.000Z</published>
    <updated>2015-09-17T02:35:28.000Z</updated>
    <content type="html"><![CDATA[<p>é¡¹ç›®ç¼–è¯‘çš„æ—¶å€™å‡ºç°</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang: <span class="keyword">error</span>: linker command failed <span class="keyword">with</span> <span class="keyword">exit</span> code <span class="number">1</span> (use -v <span class="keyword">to</span> see invocation)</span><br></pre></td></tr></table></figure>
<p>å¯èƒ½æ˜¯ç”±äºå¼•ç”¨çš„é™æ€åº“æ–‡ä»¶æ‰¾ä¸åˆ°ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œç‚¹å‡»  <code>Build Settings</code> - <code>All</code> - <code>Search Paths</code> - <code>Library Search Paths</code> -<code>æ·»åŠ åº“æ–‡ä»¶æ‰€åœ¨ä½ç½®</code></p>
<p><img src="/img/linkerfilenotfound1.png" alt=""></p>
<p>æ¸…ç†ï¼Œç¼–è¯‘å‡ æ¬¡è¯•è¯•ã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>é¡¹ç›®ç¼–è¯‘çš„æ—¶å€™å‡ºç°</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td clas]]>
    </summary>
    
      <category term="Debug" scheme="http://lecason.com/tags/Debug/"/>
    
      <category term="Debug" scheme="http://lecason.com/categories/Debug/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Swift è°ƒç”¨OC .aé™æ€åº“åŠä½¿ç”¨Cè¯­è¨€ç¼–ç¨‹]]></title>
    <link href="http://lecason.com/2015/09/16/Swift-use-Objective-and-link-dotA-Lib/"/>
    <id>http://lecason.com/2015/09/16/Swift-use-Objective-and-link-dotA-Lib/</id>
    <published>2015-09-16T05:36:27.000Z</published>
    <updated>2015-09-16T05:57:40.000Z</updated>
    <content type="html"><![CDATA[<p>æ–°é¡¹ç›®ç”¨çš„Swiftå†™ï¼Œä½†è¦å¼•ç”¨ä¸€ä¸ª.açš„é™æ€åº“ï¼Œè¿˜è¦ç”¨Cè¯­è¨€è°ƒç”¨.açš„æ–¹æ³•ï¼Œæ‰€ä»¥å°±ç›´æ¥é€šè¿‡OCæ¥ä¸­è½¬ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªä¸­è½¬çš„OCç±» </p>
<p><img src="/img/swiftusec.png" alt=""></p>
<p>æ–°å»º <code>å·¥ç¨‹å + â€œ-Bridging-Header.h</code> æ–‡ä»¶,å†å¯¼å…¥ <code>CoAPService.h</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  CoAP Swift Demo-Bridging-Header.h</span></span><br><span class="line"><span class="comment">//  CoAP Swift Demo</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Lecason on 15/9/16.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2015å¹´ Shenzhen Lecason Technology Co.,LTD. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#ifndef CoAP_Swift_Demo_CoAP_Swift_Demo_Bridging_Header_h</span></span><br><span class="line"><span class="preprocessor">#define CoAP_Swift_Demo_CoAP_Swift_Demo_Bridging_Header_h</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">"CoAPService.h"</span></span></span><br></pre></td></tr></table></figure>
<p>å†æŠŠé™æ€åº“å’Œ<code>libcoap.a</code>å’Œé™æ€åº“çš„å¤´æ–‡ä»¶<code>coap.h</code>å¯¼å…¥é¡¹ç›®ä¸­ï¼Œç„¶ååœ¨ä¸­è½¬æ–‡ä»¶ä¸­å¯¼å…¥<code>coap.h</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">"CoAPService.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"coap.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CoAPService</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)connectCoAPServer &#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">2048</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> s = coap_connect(<span class="string">"8.8.8.8"</span>, <span class="number">5683</span>);</span><br><span class="line">    coap_send(s, <span class="string">"PUT"</span>, <span class="string">"/interface"</span>, <span class="string">"hello world!"</span>, <span class="number">16</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">0</span> == ret)</span><br><span class="line">    &#123;</span><br><span class="line">    ret = coap_recv(s, buf, <span class="number">2048</span>);</span><br><span class="line">    sleep(<span class="number">5000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    coap_close(s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨<code>ViewController.swift</code>å°±å¯ä»¥è°ƒç”¨</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> coap: <span class="type">CoAPService</span> = <span class="type">CoAPService</span>()</span><br><span class="line">        coap.connectCoAPServer()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p>æ–°é¡¹ç›®ç”¨çš„Swiftå†™ï¼Œä½†è¦å¼•ç”¨ä¸€ä¸ª.açš„é™æ€åº“ï¼Œè¿˜è¦ç”¨Cè¯­è¨€è°ƒç”¨.açš„æ–¹æ³•ï¼Œæ‰€ä»¥å°±ç›´æ¥é€šè¿‡OCæ¥ä¸­è½¬ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªä¸­è½¬çš„OCç±» </p>
<p><img src="/img/swiftusec.png" alt=""></p>
<p>æ–°å»º <code>å·¥ç¨‹å ]]>
    </summary>
    
      <category term="Swift" scheme="http://lecason.com/tags/Swift/"/>
    
      <category term="Swift" scheme="http://lecason.com/categories/Swift/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS è¿œç¨‹é€šçŸ¥çš„å®ç°]]></title>
    <link href="http://lecason.com/2015/09/15/iOS-Remote-Notificaton/"/>
    <id>http://lecason.com/2015/09/15/iOS-Remote-Notificaton/</id>
    <published>2015-09-15T02:27:45.000Z</published>
    <updated>2015-09-15T07:57:15.000Z</updated>
    <content type="html"><![CDATA[<h2 id="æ³¨å†Œæ¨é€è¯ä¹¦">æ³¨å†Œæ¨é€è¯ä¹¦</h2><p>æˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¸è‹¹æœæœåŠ¡å™¨ä¹‹é—´å’Œæˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ä¸è‹¹æœæœåŠ¡å™¨ä¹‹é—´éƒ½éœ€è¦è¯ä¹¦æ¥è¿›è¡Œé“¾æ¥ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å¼€å§‹è¿›å…¥è¯ä¹¦çš„åˆ¶ä½œè¿‡ç¨‹ã€‚</p>
<h3 id="ç”ŸæˆCSRæ–‡ä»¶">ç”ŸæˆCSRæ–‡ä»¶</h3><p>æ‰“å¼€<code>MAC</code> - <code>é’¥åŒ™ä¸²è®¿é—®</code> - <code>èœå•</code> - <code>è¯ä¹¦åŠ©ç†</code> - <code>ä»è¯ä¹¦é¢å‘æœºæ„è¯·æ±‚è¯ä¹¦</code> - <code>å­˜å‚¨åˆ°ç£ç›˜</code></p>
<p><img src="/img/remotenotification1.png" alt=""></p>
<h3 id="æ³¨å†Œ_App_IDs">æ³¨å†Œ App IDs</h3><p>è¿™ä¸ªæ˜¯ç¨‹åºè¦å¡«å…¥çš„Bundle ID,Explicit App IDæ˜¯å›ºå®šä¸€ä¸ªAPPï¼ŒWildcard App IDæ˜¯é€šç”¨å‰ç¼€çš„App</p>
<p>æ‰“å¼€<code>developer.apple.com</code> - <code>Idenfifiers</code> - <code>App IDs</code> - <code>+</code> - <code>App ID Description</code> - <code>åº”ç”¨åå­—</code></p>
<p>App ID Description å†™ä¸Šè‡ªå·±åº”ç”¨åå­— </p>
<p><img src="/img/remotenotification3.png" alt=""></p>
<p>Bundle ID å†™ä¸Šåº”ç”¨æ ‡è¯† é€‰æ‹©<code>App ID Suffix</code> - <code>Explicit App ID</code> - <code>Bundle ID</code> - <code>App å‡†å¤‡ç”¨çš„Bundle ID</code></p>
<p><img src="/img/remotenotification4.png" alt=""></p>
<p>å‹¾é€‰ é€šçŸ¥ é€‰æ‹©<code>App Services</code> - <code>å‹¾é€‰</code> - <code>Push Notificatioons</code></p>
<p><img src="/img/remotenotification5.png" alt=""></p>
<p>è¿™æ—¶å€™çœ‹åˆ° provisioning profiles æ˜¯è¿™æ ·å­çš„</p>
<p><img src="/img/remotenotification6.png" alt=""></p>
<h3 id="æ³¨å†Œ_Certificates">æ³¨å†Œ Certificates</h3><p>å¼€å‘æ¨é€é€‰Apple Push Notification service SSL (Sandbox)ï¼Œç”Ÿäº§ç¯å¢ƒé€‰Apple Push Notification service SSL (Production)</p>
<p>æ‰“å¼€<code>developer.apple.com</code> - <code>Certificates</code> - <code>All</code> - <code>+</code> - <code>Apple Push Notification service SSL (Sandbox)</code> </p>
<p><img src="/img/remotenotification2.png" alt=""></p>
<p>é€‰æ‹©ä¸Šé¢é…ç½®çš„Bundle ID </p>
<p><img src="/img/remotenotification7.png" alt=""></p>
<p>ä¸Šä¼ ç”Ÿæˆçš„CSRæ–‡ä»¶</p>
<p><img src="/img/remotenotification8.png" alt=""></p>
<p>ä¸‹è½½ç”Ÿæˆçš„è¯ä¹¦ï¼Œä¸‹è½½å®Œæˆåï¼ŒåŒå‡»å¯¼å…¥è¯ä¹¦ <code>aps_development.cer</code></p>
<p><img src="/img/remotenotification9.png" alt=""></p>
<h3 id="æ³¨å†Œæµ‹è¯•è®¾å¤‡_Devices">æ³¨å†Œæµ‹è¯•è®¾å¤‡ Devices</h3><p>æ‰“å¼€<code>developer.apple.com</code> - <code>Devices</code> - <code>+</code> æ·»åŠ è¦æµ‹è¯•çš„è®¾å¤‡</p>
<p><img src="/img/remotenotification10.png" alt=""></p>
<h3 id="ç”Ÿæˆé…ç½®æ–‡ä»¶å¹¶ä¸‹è½½_Provisioning_Profiles">ç”Ÿæˆé…ç½®æ–‡ä»¶å¹¶ä¸‹è½½ Provisioning Profiles</h3><p>æ‰“å¼€<code>developer.apple.com</code> - <code>Provisioning Profiles</code> -<code>All</code> - <code>+</code> </p>
<p>é€‰æ‹© iOS App Development</p>
<p><img src="/img/remotenotification11.png" alt=""></p>
<p>é€‰æ‹© App ID </p>
<p><img src="/img/remotenotification12.png" alt=""></p>
<p>é€‰æ‹©è¯ä¹¦</p>
<p><img src="/img/remotenotification13.png" alt=""></p>
<p>é€‰æ‹©è®¾å¤‡</p>
<p><img src="/img/remotenotification14.png" alt=""></p>
<p>æ·»åŠ é…ç½®æ–‡ä»¶å</p>
<p><img src="/img/remotenotification15.png" alt=""></p>
<p>ä¸‹è½½ä¿å­˜ï¼Œå¹¶åŒå‡»é…ç½®æ–‡ä»¶</p>
<p><img src="/img/remotenotification16.png" alt=""></p>
<p>å¦‚æœä¸åŒå‡»å¯¼å…¥ï¼Œä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯</p>
<p><img src="/img/remotenotification20.png" alt=""></p>
<h3 id="å¯¼å‡ºå¯†é’¥">å¯¼å‡ºå¯†é’¥</h3><p><code>Mac</code> - <code>é’¥åŒ™ä¸²è®¿é—®</code> - <code>æ‰¾åˆ°æˆ‘ä»¬åŒå‡»å¯¼å…¥çš„è¯ä¹¦</code></p>
<p><img src="/img/remotenotification17.png" alt=""></p>
<p>è®¾ç½®æ–‡ä»¶åä¸º<code>Push.p12</code>å¯†ç  <code>123456</code></p>
<p><img src="/img/remotenotification18.png" alt=""></p>
<h3 id="ç”Ÿæˆæ¨é€PEMæ–‡ä»¶">ç”Ÿæˆæ¨é€PEMæ–‡ä»¶</h3><p><code>Mac</code> - <code>ç»ˆç«¯</code> - <code>åˆ‡æ¢åˆ°åˆšæ‰è¯ä¹¦ä¸‹è½½åœ°å€</code></p>
<p>æŠŠ<code>aps_development.cer</code>çš„SSLè¯ä¹¦è½¬æ¢ä¸º<code>PushCert.pem</code>æ–‡ä»¶:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -in aps_development.cer -inform der -out PushCert.pem</span><br></pre></td></tr></table></figure>
<p>æŠŠç§é’¥<code>Push.p12</code>æ–‡ä»¶è½¬åŒ–ä¸º<code>PushKey.pem</code>æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œè¦è¾“å…¥åŸå¯†ç <code>123456</code>å’Œè®¾ç½®æ–°å¯†ç <code>123456</code>ï¼Œå¯ä»¥è®¾ç½®ä¸ä¸€æ ·ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -nocerts -out PushKey.pem -in Push.p12</span><br></pre></td></tr></table></figure>
<p>å¯¹ç”Ÿæˆçš„è¿™ä¸¤ä¸ªpemæ–‡ä»¶å†ç”Ÿæˆä¸€ä¸ªpemæ–‡ä»¶ï¼Œæ¥æŠŠè¯ä¹¦å’Œç§é’¥æ•´åˆåˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat PushCert.pem PushKey.pem &gt; ck.pem</span><br></pre></td></tr></table></figure>
<h2 id="æ¨é€æµ‹è¯•">æ¨é€æµ‹è¯•</h2><p>ä¸‹é¢æˆ‘ä»¬è¦ä½¿ç”¨æˆ‘ä»¬ç”Ÿæˆçš„SSLè¯ä¹¦å’Œç§é’¥æ¥è®¾ç½®ä¸€ä¸ªå®‰å…¨çš„é“¾æ¥å»é“¾æ¥è‹¹æœæœåŠ¡å™¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl s_client -connect gateway.sandbox.push.apple.com:<span class="number">2195</span> -cert PushCert.pem -key PushKey.pem</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œè¿™ä¸€å¥å‘½ä»¤åéœ€è¦æˆ‘ä»¬è¾“å…¥å¯†è¯­<br>Enter pass phrase for PushKey.pem:<br>æˆ‘ä»¬è¾“å…¥<code>123456</code>æŒ‰å›è½¦</p>
<p>è¿”å› <code>Verify return code:0(ok)</code> å°±æˆåŠŸäº†</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">CONNECTED(<span class="number">00000003</span>)</span><br><span class="line">depth=<span class="number">1</span> /C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) <span class="number">2009</span> Entrust, Inc./CN=Entrust Certification Authority - L1C</span><br><span class="line">verify error:num=<span class="number">20</span>:unable to get <span class="built_in">local</span> issuer certificate</span><br><span class="line">verify <span class="built_in">return</span>:<span class="number">0</span></span><br><span class="line">---</span><br><span class="line">Certificate chain</span><br><span class="line"><span class="number">0</span> s:/C=US/ST=California/L=Cupertino/O=Apple Inc./CN=gateway.sandbox.push.apple.com</span><br><span class="line">i:/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) <span class="number">2009</span> Entrust, Inc./CN=Entrust Certification Authority - L1C</span><br><span class="line"><span class="number">1</span> s:/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) <span class="number">2009</span> Entrust, Inc./CN=Entrust Certification Authority - L1C</span><br><span class="line">i:/O=Entrust.net/OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.)/OU=(c) <span class="number">1999</span> Entrust.net Limited/CN=Entrust.net Certification Authority (<span class="number">2048</span>)</span><br><span class="line">---</span><br><span class="line">Server certificate</span><br><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">MIIFMzCCBBugAwIBAgIETCMmsDANBgkqhkiG9w0BAQUFADCBsTELMAkGA1UEBhMC</span><br><span class="line">VVMxFjAUBgNVBAoTDUVudHJ1c3QsIEluYy4xOTA3BgNVBAsTMHd3dy5lbnRydXN0</span><br><span class="line">Lm5ldC9ycGEgaXMgaW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5jZTEfMB0GA1UECxMW</span><br><span class="line">KGMpIDIwMDkgRW50cnVzdCwgSW5jLjEuMCwGA1UEAxMlRW50cnVzdCBDZXJ0aWZp</span><br><span class="line">Y2F0aW9uIEF1dGhvcml0eSAtIEwxQzAeFw0xNDA1MjMxNzQyNDJaFw0xNjA1MjQw</span><br><span class="line">NzA1MTNaMHQxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRIwEAYD</span><br><span class="line">VQQHEwlDdXBlcnRpbm8xEzARBgNVBAoTCkFwcGxlIEluYy4xJzAlBgNVBAMTHmdh</span><br><span class="line">dGV3YXkuc2FuZGJveC5wdXNoLmFwcGxlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQAD</span><br><span class="line">ggEPADCCAQoCggEBAOQpUlXpU3+LJ2XR01QdVooN7S9OFOINp3/tomPaenQAwFGo</span><br><span class="line">qIakKFcN7AotWLFXFcR0QXKJkn4PL/zPKDBucyRFkc79S5+ZraGRISW<span class="keyword">fi</span>7G8XeaG</span><br><span class="line">G3GzgeVQ977Qrn0IdCswnbwLsJoErnmq4AveQajUbYueR9SxhkWBwMimSxXzXoOS</span><br><span class="line">XUOPzRvzObCxVZrvBBDSRJCeNVnVxtCmb17DM3+z5GZatBwWnvw0jgvSQsgof+uC</span><br><span class="line">idXgqcN4msv3tVH54ipmuD9kbbwvtnDCHBZRXMMmhUfFXZRuE8GBEbPfVkqB16ad</span><br><span class="line">JV4TVrVxwFENwdnsX9CXavHCgFJhtHRWKOoCH48CAwEAAaOCAY0wggGJMAsGA1Ud</span><br><span class="line">DwQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwMwYDVR0fBCww</span><br><span class="line">KjAooCagJIYiaHR0cDovL2NybC5lbnRydXN0Lm5ldC9sZXZlbDFjLmNybDBkBggr</span><br><span class="line">BgEFBQcBAQRYMFYwIwYIKwYBBQUHMAGGF2h0dHA6Ly9vY3NwLmVudHJ1c3QubmV0</span><br><span class="line">MC8GCCsGAQUFBzAChiNodHRwOi8vYWlhLmVudHJ1c3QubmV0LzIwNDgtbDFjLmNl</span><br><span class="line">cjBKBgNVHSAEQzBBMDUGCSqGSIb2fQdLAjAoMCYGCCsGAQUFBwIBFhpodHRwOi8v</span><br><span class="line">d3d3LmVudHJ1c3QubmV0L3JwYTAIBgZngQwBAgIwKQYDVR0RBCIwIIIeZ2F0ZXdh</span><br><span class="line">eS5zYW5kYm94LnB1c2guYXBwbGUuY29tMB8GA1UdIwQYMBaAFB7xq4kG+EkPATN3</span><br><span class="line"><span class="number">7</span>hR67hl8kyhNMB0GA1UdDgQWBBSSGfpGPmr9+FPcqRiStH0iKRBL7DAJBgNVHRME</span><br><span class="line">AjAAMA0GCSqGSIb3DQEBBQUAA4IBAQAkj6+okMFVl7NHqQoii4e4iPDFiia+LmHX</span><br><span class="line">BCc+<span class="number">2</span>UEOOjilYWYoZ61oeqRXQ2b4Um3dT/LPmzMkKmgEt9epKNBLA6lSkL+IzEnF</span><br><span class="line">wLQCHkL3BgvV20n5D8syzREV+<span class="number">8</span>RKmSqiYmrF8dFq8cDcstu2joEKd173EfrymWW1</span><br><span class="line">fMeaYTbjrn+vNkgM94+M4c/JnIDOhiPPbeAx9TESQZH+/<span class="number">6</span>S98hrbuPIIlmaOJsOT</span><br><span class="line">GMOUWeOTHXTCfGb1EM4SPVcyCW28TlWUBl8miqnsEO8g95jZZ25wFANlVxhfxBnP</span><br><span class="line">fwUYU5NTM3h0xi3rIlXwAKD6zLKipcQ/YXRx7oMYnAm53tfU2MxV</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">subject=/C=US/ST=California/L=Cupertino/O=Apple Inc./CN=gateway.sandbox.push.apple.com</span><br><span class="line">issuer=/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) <span class="number">2009</span> Entrust, Inc./CN=Entrust Certification Authority - L1C</span><br><span class="line">---</span><br><span class="line">Acceptable client certificate CA names</span><br><span class="line">/C=US/O=Apple Inc./OU=Apple Certification Authority/CN=Apple Root CA</span><br><span class="line">/C=US/O=Apple Inc./OU=Apple Worldwide Developer Relations/CN=Apple Worldwide Developer Relations Certification Authority</span><br><span class="line">/C=US/O=Apple Inc./OU=Apple Certification Authority/CN=Apple Application Integration Certification Authority</span><br><span class="line">---</span><br><span class="line">SSL handshake has <span class="built_in">read</span> <span class="number">3160</span> bytes and written <span class="number">2155</span> bytes</span><br><span class="line">---</span><br><span class="line">New, TLSv1/SSLv3, Cipher is AES256-SHA</span><br><span class="line">Server public key is <span class="number">2048</span> bit</span><br><span class="line">Secure Renegotiation IS supported</span><br><span class="line">Compression: NONE</span><br><span class="line">Expansion: NONE</span><br><span class="line">SSL-Session:</span><br><span class="line">Protocol  : TLSv1</span><br><span class="line">Cipher    : AES256-SHA</span><br><span class="line">Session-ID: </span><br><span class="line">Session-ID-ctx: </span><br><span class="line">Master-Key: <span class="number">208</span>E318208EB463C7F924DFDA0E80C82FC7A6B04CE89FE7AE0D99C789DE653F20F6B7FB8073C3DBBF6ED74F90A4B389D</span><br><span class="line">Key-Arg   : None</span><br><span class="line">Start Time: <span class="number">1442292792</span></span><br><span class="line">Timeout   : <span class="number">300</span> (sec)</span><br><span class="line">Verify <span class="built_in">return</span> code: <span class="number">0</span> (ok)</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h2 id="é¡¹ç›®æµ‹è¯•">é¡¹ç›®æµ‹è¯•</h2><p>å»ºç«‹æˆ‘ä»¬çš„æ¨é€çš„é¡¹ç›® <em><code>æ³¨æ„Bundle Identifierå¿…é¡»å’Œæˆ‘ä»¬æ¨é€åº”ç”¨çš„Bundle Identifierä¸€è‡´</code></em></p>
<p><img src="/img/remotenotification19.png" alt=""></p>
<p>iOS 8 ä»¥ä¸Šåœ¨AppDelegateè·å¾—è¿œç¨‹é€šçŸ¥æƒé™å¹¶æ³¨å†Œçš„æ–¹æ³•ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ³¨å†Œè¿œç¨‹é€šçŸ¥</span></span><br><span class="line">    <span class="built_in">UIUserNotificationType</span> types = <span class="built_in">UIUserNotificationTypeBadge</span> |</span><br><span class="line">    <span class="built_in">UIUserNotificationTypeSound</span> | <span class="built_in">UIUserNotificationTypeAlert</span>;</span><br><span class="line">    <span class="built_in">UIUserNotificationSettings</span> *mySettings =</span><br><span class="line">    [<span class="built_in">UIUserNotificationSettings</span> settingsForTypes:types categories:<span class="literal">nil</span>];</span><br><span class="line">    [[<span class="built_in">UIApplication</span> sharedApplication] registerUserNotificationSettings:mySettings];</span><br><span class="line">    [[<span class="built_in">UIApplication</span> sharedApplication] registerForRemoteNotifications];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–DeviceTokenæˆåŠŸ</span></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">didRegisterForRemoteNotificationsWithDeviceToken:(<span class="built_in">NSData</span> *)deviceToken</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"DeviceToken : %@"</span>,deviceToken);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œæ¶ˆæ¯æ¨é€å¤±è´¥</span></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">didFailToRegisterForRemoteNotificationsWithError:(<span class="built_in">NSError</span> *)error</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Register Remote Notifications error : %@"</span>,error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯æ¨é€</span></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">didReceiveRemoteNotification:(<span class="built_in">NSDictionary</span> *)userInfo</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Receive remote notification : %@"</span>,userInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>å®Œæˆåï¼Œå¯åŠ¨ä¸€æ¬¡App,ç”³è¯·æƒé™ </p>
<p><img src="/img/remotenotification21.jpg" alt=""></p>
<p>æ–°å»ºä¸€ä¸ªå’Œ<code>ck.pem</code>åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹çš„<code>push.php</code>æ–‡ä»¶</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Put your device token here (without spaces):</span></span><br><span class="line"><span class="variable">$deviceToken</span> = <span class="string">'74314cc9e8f747e2fa96c2c1585c830cdf994de6b453ce9fa1c09ba396b2f9e9'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Put your private key's passphrase here:</span></span><br><span class="line"><span class="variable">$passphrase</span> = <span class="string">'123456'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Put your alert message here:</span></span><br><span class="line"><span class="variable">$message</span> = <span class="string">'è¿™æ˜¯ä¸€æ¡æ¨é€æ¶ˆæ¯'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$ctx</span> = stream_context_create();</span><br><span class="line">stream_context_set_option(<span class="variable">$ctx</span>, <span class="string">'ssl'</span>, <span class="string">'local_cert'</span>, <span class="string">'ck.pem'</span>);</span><br><span class="line">stream_context_set_option(<span class="variable">$ctx</span>, <span class="string">'ssl'</span>, <span class="string">'passphrase'</span>, <span class="variable">$passphrase</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Open a connection to the APNS server</span></span><br><span class="line"><span class="variable">$fp</span> = stream_socket_client(</span><br><span class="line"><span class="string">'ssl://gateway.sandbox.push.apple.com:2195'</span>, <span class="variable">$err</span>,</span><br><span class="line"><span class="variable">$errstr</span>, <span class="number">60</span>, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, <span class="variable">$ctx</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$fp</span>)</span><br><span class="line"><span class="keyword">exit</span>(<span class="string">"Failed to connect: $err $errstr"</span> . PHP_EOL);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Connected to APNS'</span> . PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create the payload body</span></span><br><span class="line"><span class="variable">$body</span>[<span class="string">'aps'</span>] = <span class="keyword">array</span>(</span><br><span class="line"><span class="string">'alert'</span> =&gt; <span class="variable">$message</span>,</span><br><span class="line"><span class="string">'sound'</span> =&gt; <span class="string">'default'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Encode the payload as JSON</span></span><br><span class="line"><span class="variable">$payload</span> = json_encode(<span class="variable">$body</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Build the binary notification</span></span><br><span class="line"><span class="variable">$msg</span> = chr(<span class="number">0</span>) . pack(<span class="string">'n'</span>, <span class="number">32</span>) . pack(<span class="string">'H*'</span>, <span class="variable">$deviceToken</span>) . pack(<span class="string">'n'</span>, strlen(<span class="variable">$payload</span>)) . <span class="variable">$payload</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Send it to the server</span></span><br><span class="line"><span class="variable">$result</span> = fwrite(<span class="variable">$fp</span>, <span class="variable">$msg</span>, strlen(<span class="variable">$msg</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$result</span>)</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Message not delivered'</span> . PHP_EOL;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'Message successfully delivered'</span> . PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Close the connection to the server</span></span><br><span class="line">fclose(<span class="variable">$fp</span>);</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>åˆ‡æ¢åˆ°<code>push.php</code>æ‰€åœ¨ç›®å½•,è¾“å…¥å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php push.php</span><br></pre></td></tr></table></figure>
<p>æç¤ºä¸‹é¢ä¿¡æ¯å°±å¯ä»¥æ”¶åˆ°æ¨é€äº†</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Lecasons-RMBP:Push lecason$ php push.php</span><br><span class="line">Connected to APNS</span><br><span class="line">Message successfully delivered</span><br><span class="line">Lecasons-RMBP:Push lecason$</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™æ‰‹æœºå°±å¯ä»¥æ”¶åˆ°æ¨é€æ¶ˆæ¯äº†ï¼Œæµ‹è¯•æ•ˆæœï¼š</p>
<p><img src="/img/remotenotification22.jpg" alt=""></p>
<h2 id="ä¸ªæ¨æµ‹è¯•">ä¸ªæ¨æµ‹è¯•</h2><p>æ–°å»ºä¸€ä¸ª<code>App</code> <code>åº”ç”¨æ ‡è¯†</code> è¦å’Œ <code>Bundle ID</code> ä¸€è‡´</p>
<p><img src="/img/remotenotification23.png" alt=""></p>
<p>å‚è€ƒ<a href="http://docs.igetui.com/pages/viewpage.action?pageId=1934126" target="_blank" rel="external">ä¸ªæ¨å®˜æ–¹é›†æˆæ–‡æ¡£</a>é›†æˆåˆ°æˆ‘ä»¬çš„åº”ç”¨é‡Œé¢ã€‚</p>
<p>å¯¼å…¥<code>dist</code>æ–‡ä»¶å¤¹å’Œ<code>æ‰€æœ‰çš„åº“æ–‡ä»¶</code>åï¼Œå¡«å¥½ä»ä¸ªæ¨ä¸Šç”³è¯·åˆ°çš„<code>AppId</code> <code>AppKey</code> <code>AppSecret</code></p>
<p><code>AppDelegate.h</code>:</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"GeTuiSdk.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#define kAppId           @<span class="title">"PntQOqaY8H69wtmvYYjBJA"</span></span></span><br><span class="line"><span class="preprocessor">#define kAppKey          @<span class="title">"v3evaqV8Ll8DNJeb4f5o74"</span></span></span><br><span class="line"><span class="preprocessor">#define kAppSecret       @<span class="title">"82KMEAqBWt6Bntxz2L9Wd8"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> : <span class="title">UIResponder</span> &lt;<span class="title">UIApplicationDelegate</span>,<span class="title">GeTuiSdkDelegate</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">@private</span></span><br><span class="line"><span class="built_in">NSString</span> *_deviceToken;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">UIWindow</span> *window;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (retain, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *appKey;</span><br><span class="line"><span class="keyword">@property</span> (retain, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *appSecret;</span><br><span class="line"><span class="keyword">@property</span> (retain, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *appID;</span><br><span class="line"><span class="keyword">@property</span> (retain, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *clientId;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p><code>AppDelegate.m</code>:</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">"AppDelegate.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#define NotifyActionKey <span class="title">"NotifyAction"</span></span></span><br><span class="line"><span class="built_in">NSString</span>* <span class="keyword">const</span> NotificationCategoryIdent  = <span class="string">@"ACTIONABLE"</span>;</span><br><span class="line"><span class="built_in">NSString</span>* <span class="keyword">const</span> NotificationActionOneIdent = <span class="string">@"ACTION_ONE"</span>;</span><br><span class="line"><span class="built_in">NSString</span>* <span class="keyword">const</span> NotificationActionTwoIdent = <span class="string">@"ACTION_TWO"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// [1]:ä½¿ç”¨APPID/APPKEY/APPSECRENTåˆ›å»ºä¸ªæ¨å®ä¾‹</span></span><br><span class="line">    [<span class="keyword">self</span> startSdkWith:kAppId appKey:kAppKey appSecret:kAppSecret];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// [2]:æ³¨å†ŒAPNS</span></span><br><span class="line">    [<span class="keyword">self</span> registerRemoteNotification];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)registerRemoteNotification </span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ([[[<span class="built_in">UIDevice</span> currentDevice] systemVersion] floatValue] &gt;= <span class="number">8.0</span>) &#123;</span><br><span class="line">        <span class="comment">//IOS8 æ–°çš„é€šçŸ¥æœºåˆ¶categoryæ³¨å†Œ</span></span><br><span class="line">        <span class="built_in">UIMutableUserNotificationAction</span> *action1;</span><br><span class="line">        action1 = [[<span class="built_in">UIMutableUserNotificationAction</span> alloc] init];</span><br><span class="line">        [action1 setActivationMode:<span class="built_in">UIUserNotificationActivationModeBackground</span>];</span><br><span class="line">        [action1 setTitle:<span class="string">@"å–æ¶ˆ"</span>];</span><br><span class="line">        [action1 setIdentifier:NotificationActionOneIdent];</span><br><span class="line">        [action1 setDestructive:<span class="literal">NO</span>];</span><br><span class="line">        [action1 setAuthenticationRequired:<span class="literal">NO</span>];</span><br><span class="line"></span><br><span class="line">        <span class="built_in">UIMutableUserNotificationAction</span> *action2;</span><br><span class="line">        action2 = [[<span class="built_in">UIMutableUserNotificationAction</span> alloc] init];</span><br><span class="line">        [action2 setActivationMode:<span class="built_in">UIUserNotificationActivationModeBackground</span>];</span><br><span class="line">        [action2 setTitle:<span class="string">@"å›å¤"</span>];</span><br><span class="line">        [action2 setIdentifier:NotificationActionTwoIdent];</span><br><span class="line">        [action2 setDestructive:<span class="literal">NO</span>];</span><br><span class="line">        [action2 setAuthenticationRequired:<span class="literal">NO</span>];</span><br><span class="line"></span><br><span class="line">        <span class="built_in">UIMutableUserNotificationCategory</span> *actionCategory;</span><br><span class="line">        actionCategory = [[<span class="built_in">UIMutableUserNotificationCategory</span> alloc] init];</span><br><span class="line">        [actionCategory setIdentifier:NotificationCategoryIdent];</span><br><span class="line">        [actionCategory setActions:@[action1, action2]</span><br><span class="line">        forContext:<span class="built_in">UIUserNotificationActionContextDefault</span>];</span><br><span class="line"></span><br><span class="line">        <span class="built_in">NSSet</span> *categories = [<span class="built_in">NSSet</span> setWithObject:actionCategory];</span><br><span class="line">        <span class="built_in">UIUserNotificationType</span> types = (<span class="built_in">UIUserNotificationTypeAlert</span>|</span><br><span class="line">        <span class="built_in">UIUserNotificationTypeSound</span>|</span><br><span class="line">        <span class="built_in">UIUserNotificationTypeBadge</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">UIUserNotificationSettings</span> *settings;</span><br><span class="line">        settings = [<span class="built_in">UIUserNotificationSettings</span> settingsForTypes:types categories:categories];</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerForRemoteNotifications];</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] registerUserNotificationSettings:settings];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–DeviceTokenæˆåŠŸ</span></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didRegisterForRemoteNotificationsWithDeviceToken:(<span class="built_in">NSData</span>*)deviceToken</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSString</span> *token = [[deviceToken description] stringByTrimmingCharactersInSet:[<span class="built_in">NSCharacterSet</span> characterSetWithCharactersInString:<span class="string">@"&lt;&gt;"</span>]];</span><br><span class="line">    _deviceToken = [token stringByReplacingOccurrencesOfString:<span class="string">@" "</span> withString:<span class="string">@""</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"deviceToken:%@"</span>, _deviceToken);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// [3]:å‘ä¸ªæ¨æœåŠ¡å™¨æ³¨å†ŒdeviceToken</span></span><br><span class="line">    [GeTuiSdk registerDeviceToken:_deviceToken];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)GeTuiSdkDidRegisterClient:(<span class="built_in">NSString</span> *)clientId</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// [4-EXT-1]: ä¸ªæ¨SDKå·²æ³¨å†Œï¼Œè¿”å›clientId</span></span><br><span class="line">    <span class="keyword">if</span> (_deviceToken) &#123;</span><br><span class="line">        [GeTuiSdk registerDeviceToken:_deviceToken];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œæ¶ˆæ¯æ¨é€å¤±è´¥</span></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">didFailToRegisterForRemoteNotificationsWithError:(<span class="built_in">NSError</span> *)error</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Register Remote Notifications error : %@"</span>,error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯æ¨é€</span></span><br><span class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">didReceiveRemoteNotification:(<span class="built_in">NSDictionary</span> *)userInfo</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Receive remote notification : %@"</span>,userInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)startSdkWith:(<span class="built_in">NSString</span> *)appID appKey:(<span class="built_in">NSString</span> *)appKey appSecret:(<span class="built_in">NSString</span> *)appSecret</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSError</span> *err = <span class="literal">nil</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//[1-1]:é€šè¿‡ AppIdã€ appKey ã€appSecret å¯åŠ¨SDK</span></span><br><span class="line">    [GeTuiSdk startSdkWithAppId:appID appKey:appKey appSecret:appSecret delegate:<span class="keyword">self</span> error:&amp;err];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//[1-2]:è®¾ç½®æ˜¯å¦åå°è¿è¡Œå¼€å…³</span></span><br><span class="line">    [GeTuiSdk runBackgroundEnable:<span class="literal">YES</span>];</span><br><span class="line">    <span class="comment">//[1-3]:è®¾ç½®ç”µå­å›´æ åŠŸèƒ½ï¼Œå¼€å¯LBSå®šä½æœåŠ¡ å’Œ æ˜¯å¦å…è®¸SDK å¼¹å‡ºç”¨æˆ·å®šä½è¯·æ±‚</span></span><br><span class="line">    [GeTuiSdk lbsLocationEnable:<span class="literal">YES</span> andUserVerify:<span class="literal">YES</span>];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)applicationDidEnterBackground:(<span class="built_in">UIApplication</span> *)application</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="comment">// [EXT] APPè¿›å…¥åå°æ—¶ï¼Œé€šçŸ¥ä¸ªæ¨SDKè¿›å…¥åå°</span></span><br><span class="line">    [GeTuiSdk enterBackground];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡ŒAPPï¼ŒæˆåŠŸåä¼šæç¤º</p>
<p><img src="/img/remotenotification24.png" alt=""></p>
<p>å‘é€é€ä¼ æ¶ˆæ¯</p>
<p><img src="/img/remotenotification25.png" alt=""></p>
<p>iPhone æ”¶åˆ°æ¨é€æ¶ˆæ¯çš„æ•ˆæœï¼š</p>
<p><img src="/img/remotenotification26.png" alt=""></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="æ³¨å†Œæ¨é€è¯ä¹¦">æ³¨å†Œæ¨é€è¯ä¹¦</h2><p>æˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¸è‹¹æœæœåŠ¡å™¨ä¹‹é—´å’Œæˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ä¸è‹¹æœæœåŠ¡å™¨ä¹‹é—´éƒ½éœ€è¦è¯ä¹¦æ¥è¿›è¡Œé“¾æ¥ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å¼€å§‹è¿›å…¥è¯ä¹¦çš„åˆ¶ä½œè¿‡ç¨‹ã€‚</p>
<h3 id="ç”ŸæˆCSRæ–‡ä»¶">ç”ŸæˆCSRæ–‡ä»¶</h3><p>æ‰“å¼€<code>MAC</c]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Debug å¯¼å…¥è‡ªå®šä¹‰åº“æç¤º Library not loaded]]></title>
    <link href="http://lecason.com/2015/09/14/Debug-Libray-not-loaded/"/>
    <id>http://lecason.com/2015/09/14/Debug-Libray-not-loaded/</id>
    <published>2015-09-14T04:57:02.000Z</published>
    <updated>2015-09-14T05:14:10.000Z</updated>
    <content type="html"><![CDATA[<p>å¯¼å…¥è‡ªå®šä¹‰çš„åº“çš„æ—¶å€™ï¼Œæç¤ºé”™è¯¯</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">dyld:</span> Library not <span class="string">loaded:</span> <span class="regexp">/System/</span>Library<span class="regexp">/Frameworks/</span>Chart.framework/Social</span><br><span class="line">Referenced <span class="string">from:</span> <span class="regexp">/var/</span>mobile<span class="regexp">/Applications/</span><span class="number">00</span>D3E0A7-<span class="number">4</span>FF6-<span class="number">451</span>E-B11C-<span class="number">87</span>D7A189F425<span class="regexp">/sample.app/</span>sample</span><br><span class="line"><span class="string">dyld:</span> Library not <span class="string">loaded:</span> <span class="regexp">/System/</span>Library<span class="regexp">/Frameworks/</span>Chart.framework/Social</span><br><span class="line">Referenced <span class="string">from:</span> <span class="regexp">/var/</span>mobile<span class="regexp">/Applications/</span><span class="number">00</span>D3E0A7-<span class="number">4</span>FF6-<span class="number">451</span>E-B11C-<span class="number">87</span>D7A189F425<span class="regexp">/sample.app/</span>sample</span><br><span class="line"><span class="string">Reason:</span> image not found</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™å¦‚å›¾ç‚¹å‡»<code>+</code> - <code>New Headers Phase</code></p>
<p><img src="/img/imagenotfound1.png" alt=""></p>
<p>å†åœ¨ <code>Copy Files (0 item)</code> Destinationé‡Œé¢é€‰æ‹© <code>Frameworks</code>ï¼Œ<code>+</code>å·é‡Œé¢é€‰æ‹©<code>è‡ªå®šä¹‰çš„åº“</code></p>
<p><img src="/img/imagenotfound2.png" alt=""></p>
<p>å¦‚æœè¿˜ä¸è¡Œå¯ä»¥å°è¯•æŠŠ<code>Build Phases</code> - <code>Link Binary With Libraries</code> é‡Œ<code>Chart.framework</code>åè¾¹çš„é€‰é¡¹ä¿®æ”¹æˆä¸º<code>Optional</code></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>å¯¼å…¥è‡ªå®šä¹‰çš„åº“çš„æ—¶å€™ï¼Œæç¤ºé”™è¯¯</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line"]]>
    </summary>
    
      <category term="Debug" scheme="http://lecason.com/tags/Debug/"/>
    
      <category term="Debug" scheme="http://lecason.com/categories/Debug/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS è‡ªå®šä¹‰å¯¼èˆªæ æ ‡é¢˜]]></title>
    <link href="http://lecason.com/2015/09/11/iOS-Custom-backBarButtonItem/"/>
    <id>http://lecason.com/2015/09/11/iOS-Custom-backBarButtonItem/</id>
    <published>2015-09-11T12:45:10.000Z</published>
    <updated>2015-09-11T12:55:44.000Z</updated>
    <content type="html"><![CDATA[<p>åœ¨OCçš„æ—¶å€™å¾ˆå®¹æ˜“å°±è®¾ç½®å¯¼èˆªæ çš„è¿”å›æŒ‰é’®æ ‡é¢˜</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›æŒ‰é’®</span></span><br><span class="line"><span class="built_in">UIBarButtonItem</span> *backItem = [[<span class="built_in">UIBarButtonItem</span> alloc] init];</span><br><span class="line">backItem<span class="variable">.title</span> = <span class="string">@""</span>;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.navigationItem</span><span class="variable">.backBarButtonItem</span> = backItem;</span><br></pre></td></tr></table></figure>
<p>ä½†åœ¨Swiftä¸‹è¯•è¿‡å¾ˆå¤šæ–¹æ³•éƒ½ä¸è¡Œ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> barBack = <span class="type">UIBarButtonItem</span>(title: <span class="string">"Reset"</span>, style: <span class="type">UIBarButtonItemStyle</span>.<span class="type">Plain</span>, target: <span class="keyword">self</span>, action: <span class="string">"reset:"</span>)</span><br><span class="line"><span class="keyword">self</span>.navigationItem.leftBarButtonItem = barBack</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.navigationItem.backBarButtonItem.title = <span class="string">"Reset"</span></span><br></pre></td></tr></table></figure>
<p>æœ€ååªèƒ½åœ¨pushViewControllerå‰è®¾ç½®NavigationBarè‡ªèº«çš„Titleä¸ºç©º</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">presentShareViewController</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> shareVC: <span class="type">HWShareViewController</span> = <span class="type">HWShareViewController</span>()</span><br><span class="line">    title = <span class="string">""</span></span><br><span class="line">    <span class="keyword">self</span>.navigationController?.pushViewController(shareVC, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<p>åœ¨OCçš„æ—¶å€™å¾ˆå®¹æ˜“å°±è®¾ç½®å¯¼èˆªæ çš„è¿”å›æŒ‰é’®æ ‡é¢˜</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span c]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS åˆ›å»ºUIImageViewåœ†å½¢å¤´åƒå¹¶æ·»åŠ è¾¹æ¡†]]></title>
    <link href="http://lecason.com/2015/09/11/iOS-Create-Round-Photo-And-Boder/"/>
    <id>http://lecason.com/2015/09/11/iOS-Create-Round-Photo-And-Boder/</id>
    <published>2015-09-11T06:57:19.000Z</published>
    <updated>2015-09-11T06:59:29.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Swift_ç‰ˆæœ¬">Swift ç‰ˆæœ¬</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ†å½¢å¤´åƒ</span></span><br><span class="line"><span class="keyword">var</span> avater: <span class="type">UIImageView</span> = <span class="type">UIImageView</span>(frame: <span class="type">CGRectMake</span>(<span class="number">60</span>, <span class="number">85</span>, <span class="number">60</span>, <span class="number">60</span>))</span><br><span class="line">avater.image = <span class="type">UIImage</span>(named: <span class="string">"avater"</span>)</span><br><span class="line"><span class="keyword">var</span> path: <span class="type">UIBezierPath</span> = <span class="type">UIBezierPath</span>(arcCenter: <span class="type">CGPointMake</span>(<span class="number">30</span>, <span class="number">30</span>), radius: <span class="number">30</span>, startAngle: <span class="number">0</span>, endAngle: <span class="number">720</span> , clockwise: <span class="literal">true</span>)</span><br><span class="line"><span class="keyword">var</span> shape: <span class="type">CAShapeLayer</span> = <span class="type">CAShapeLayer</span>(layer: <span class="literal">nil</span>)</span><br><span class="line">shape.path = path.<span class="type">CGPath</span></span><br><span class="line">avater.layer.mask = shape</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ†å½¢èƒŒæ™¯</span></span><br><span class="line"><span class="keyword">var</span> avaterbg: <span class="type">UIImageView</span> = <span class="type">UIImageView</span>(frame: <span class="type">CGRectMake</span>(<span class="number">10</span>, <span class="number">35</span>, <span class="number">64</span>, <span class="number">64</span>))</span><br><span class="line">avaterbg.backgroundColor = <span class="type">UIColor</span>.whiteColor()</span><br><span class="line">avaterbg.center = avater.center</span><br><span class="line"><span class="keyword">var</span> pathbg: <span class="type">UIBezierPath</span> = <span class="type">UIBezierPath</span>(arcCenter: <span class="type">CGPointMake</span>(<span class="number">32</span>, <span class="number">32</span>), radius: <span class="number">32</span>, startAngle: <span class="number">0</span>, endAngle: <span class="number">720</span> , clockwise: <span class="literal">true</span>)</span><br><span class="line"><span class="keyword">var</span> shapebg: <span class="type">CAShapeLayer</span> = <span class="type">CAShapeLayer</span>(layer: <span class="literal">nil</span>)</span><br><span class="line">shapebg.path = pathbg.<span class="type">CGPath</span></span><br><span class="line">avaterbg.layer.mask = shapebg</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.view.addSubview(avaterbg)</span><br><span class="line"><span class="keyword">self</span>.view.addSubview(avater)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼Œ<code>UIBezierPath</code>è¿˜æ˜¯æœ‰é”¯é½¿<br><img src="/img/roundavater1.png" alt=""></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="Swift_ç‰ˆæœ¬">Swift ç‰ˆæœ¬</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Swift è‡ªå®šä¹‰TableViewCell]]></title>
    <link href="http://lecason.com/2015/09/11/Swift-Custom-TablewViewCell/"/>
    <id>http://lecason.com/2015/09/11/Swift-Custom-TablewViewCell/</id>
    <published>2015-09-11T05:16:14.000Z</published>
    <updated>2015-09-11T05:38:44.000Z</updated>
    <content type="html"><![CDATA[<h2 id="åœ¨_LeftMenuViewController_é‡Œé¢_åˆ›å»ºå»¶è¿ŸåŠ è½½_tableView_å±æ€§">åœ¨ LeftMenuViewController é‡Œé¢ åˆ›å»ºå»¶è¿ŸåŠ è½½ tableView å±æ€§</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LeftMenuViewController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    lazy <span class="keyword">var</span> tableView: <span class="type">UITableView</span> = &#123;</span><br><span class="line">    <span class="keyword">let</span> tableView = <span class="type">UITableView</span>()</span><br><span class="line">    tableView.delegate = <span class="keyword">self</span></span><br><span class="line">    tableView.dataSource = <span class="keyword">self</span></span><br><span class="line">    tableView.separatorStyle = .<span class="type">None</span></span><br><span class="line">    tableView.frame = <span class="type">CGRectMake</span>(<span class="number">20</span>, (<span class="keyword">self</span>.view.frame.size.height - <span class="number">54</span> * <span class="number">5</span>) / <span class="number">2.0</span>, <span class="keyword">self</span>.view.frame.size.width, <span class="number">54</span> * <span class="number">5</span>)</span><br><span class="line">    tableView.autoresizingMask = .<span class="type">FlexibleTopMargin</span> | .<span class="type">FlexibleBottomMargin</span> | .<span class="type">FlexibleWidth</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ³¨å†Œæˆ‘ä»¬å¤ç”¨çš„HWLeftTableViewCell</span></span><br><span class="line">    tableView.registerClass(<span class="type">HWLeftTableViewCell</span>.<span class="keyword">self</span>, forCellReuseIdentifier: <span class="string">"cell"</span>)</span><br><span class="line">    </span><br><span class="line">    tableView.opaque = <span class="literal">false</span></span><br><span class="line">    tableView.backgroundColor = <span class="type">UIColor</span>.clearColor()</span><br><span class="line">    tableView.backgroundView = <span class="literal">nil</span></span><br><span class="line">    tableView.bounces = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">return</span> tableView</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="viewDidLoad()é‡Œé¢åŠ è½½_tableView">viewDidLoad()é‡Œé¢åŠ è½½ tableView</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">    view.addSubview(tableView)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ‰©å±•_extension">æ‰©å±• extension</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LeftMenuViewController</span>: <span class="title">UITableViewDelegate</span>, <span class="title">UITableViewDataSource</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¡Œæ•°</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¡Œé«˜</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">54</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Cellå†…å®¹</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é‡ç”¨æˆ‘ä»¬çš„Cell</span></span><br><span class="line">        <span class="keyword">let</span> cell = tableView.dequeueReusableCellWithIdentifier(<span class="string">"cell"</span>, forIndexPath: indexPath) <span class="keyword">as</span>! <span class="type">HWLeftTableViewCell</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> titles: [<span class="type">String</span>] = [<span class="string">"ç”µè¯æé†’"</span>, <span class="string">"ä¿¡æ¯æé†’"</span>, <span class="string">"é—¹é’Ÿè®¾ç½®"</span>, <span class="string">"è“ç‰™åŒæ­¥"</span>]</span><br><span class="line">        <span class="keyword">let</span> images: [<span class="type">String</span>] = [<span class="string">"left_phone"</span>, <span class="string">"left_message"</span>, <span class="string">"left_clock"</span>, <span class="string">"left_bluetooth"</span>]</span><br><span class="line"></span><br><span class="line">        cell.backgroundColor = <span class="type">UIColor</span>.clearColor()</span><br><span class="line">        cell.textLabel?.font = <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue"</span>, size: <span class="number">16</span>)</span><br><span class="line">        cell.textLabel?.textColor = <span class="type">UIColor</span>.whiteColor()</span><br><span class="line">        cell.textLabel?.text  = titles[indexPath.row]</span><br><span class="line">        cell.selectionStyle = .<span class="type">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬ä¸‰è¡Œè®¾ç½® &gt; å›¾æ ‡</span></span><br><span class="line">        <span class="keyword">if</span> indexPath.row == <span class="number">3</span> &#123;</span><br><span class="line">            cell.arrow.image = <span class="type">UIImage</span>(named: <span class="string">"left_arrow"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        cell.imageView?.image = <span class="type">UIImage</span>(named: images[indexPath.row])</span><br><span class="line">        <span class="keyword">return</span> cell</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç‚¹å‡»æ–¹æ³•</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">        tableView.deselectRowAtIndexPath(indexPath, animated: <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> indexPath.row &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">println</span>(<span class="string">"Select Row At Index 0"</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="built_in">println</span>(<span class="string">"Select Row At Index 1"</span>)  </span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="built_in">println</span>(<span class="string">"Select Row At Index 2"</span>)  </span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åœ¨_HWLeftTableViewCell-swift_é‡Œé¢è‡ªå®šä¹‰TableViewCell">åœ¨ HWLeftTableViewCell.swift é‡Œé¢è‡ªå®šä¹‰TableViewCell</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">UIKit</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HWLeftTableViewCell</span>: <span class="title">UITableViewCell</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå¹¶åˆä½¿åŒ–arrow</span></span><br><span class="line">    <span class="keyword">var</span> arrow: <span class="type">UIImageView</span> = <span class="type">UIImageView</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">awakeFromNib</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.awakeFromNib()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡å†™ init</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(style: <span class="type">UITableViewCellStyle</span>, reuseIdentifier: <span class="type">String</span>!) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(style: style, reuseIdentifier: reuseIdentifier)</span><br><span class="line">        arrow = <span class="type">UIImageView</span>(frame: <span class="type">CGRectMake</span>(<span class="number">155</span>, <span class="number">21</span>, <span class="number">8</span>, <span class="number">12</span>))</span><br><span class="line">        arrow.contentMode = <span class="type">UIViewContentMode</span>.<span class="type">ScaleAspectFill</span></span><br><span class="line">        <span class="keyword">self</span>.addSubview(arrow)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¦æ±‚ required init</span></span><br><span class="line">    required <span class="keyword">init</span>(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        fatalError(<span class="string">"init(coder:) has not been implemented"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">setSelected</span><span class="params">(selected: Bool, animated: Bool)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.setSelected(selected, animated: animated)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Configure the view for the selected state</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœ:<br><img src="\img\swiftcustomtableviewcell1.png" alt=""></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="åœ¨_LeftMenuViewController_é‡Œé¢_åˆ›å»ºå»¶è¿ŸåŠ è½½_tableView_å±æ€§">åœ¨ LeftMenuViewController é‡Œé¢ åˆ›å»ºå»¶è¿ŸåŠ è½½ tableView å±æ€§</h2><figure class="highlight swift"]]>
    </summary>
    
      <category term="Swift" scheme="http://lecason.com/tags/Swift/"/>
    
      <category term="Swift" scheme="http://lecason.com/categories/Swift/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iOS è®¾ç½®å¯¼èˆªæ é€æ˜å¹¶å»é™¤1pxç»†çº¿]]></title>
    <link href="http://lecason.com/2015/09/10/iOS-Set-Transarent-NavigationBar/"/>
    <id>http://lecason.com/2015/09/10/iOS-Set-Transarent-NavigationBar/</id>
    <published>2015-09-10T03:45:49.000Z</published>
    <updated>2015-09-10T03:50:04.000Z</updated>
    <content type="html"><![CDATA[<p>è®¾ç½®å¯¼èˆªæ é€æ˜åªè¦åœ¨viewDidLoad()å†™ä¸Š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.navigationItem.title =  <span class="string">"æ™ºèƒ½æ‰‹ç¯"</span></span><br><span class="line"><span class="keyword">self</span>.navigationController?.navigationBar.setBackgroundImage(<span class="type">UIImage</span>.<span class="keyword">new</span>(), forBarPosition: <span class="type">UIBarPosition</span>.<span class="type">Any</span>, barMetrics: <span class="type">UIBarMetrics</span>.<span class="type">Compact</span>)</span><br><span class="line"><span class="keyword">self</span>.navigationController?.navigationBar.shadowImage = <span class="type">UIImage</span>.<span class="keyword">new</span>()</span><br></pre></td></tr></table></figure>
<p>å‘ç°æœ‰1pxçº¿çº¿<br><img src="/img/navigartionbartransparents1.png" alt=""></p>
<p>è¿™æ—¶å€™åªè¦å†åŠ ä¸Šä¸‹é¢ä»£ç å°±å¯ä»¥å®Œå…¨é€æ˜äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.navigationController?.navigationBar.barStyle = <span class="type">UIBarStyle</span>.<span class="type">BlackTranslucent</span></span><br><span class="line"><span class="keyword">self</span>.navigationController?.navigationBar.clipsToBounds = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="/img/navigartionbartransparents2.png" alt=""></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>è®¾ç½®å¯¼èˆªæ é€æ˜åªè¦åœ¨viewDidLoad()å†™ä¸Š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span cla]]>
    </summary>
    
      <category term="iOS" scheme="http://lecason.com/tags/iOS/"/>
    
      <category term="iOS" scheme="http://lecason.com/categories/iOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[CoAP LinuxæœåŠ¡å™¨ä¸Šå®‰è£…ä»¥åŠä½¿ç”¨]]></title>
    <link href="http://lecason.com/2015/09/09/CoAP-Linux-Server-Install/"/>
    <id>http://lecason.com/2015/09/09/CoAP-Linux-Server-Install/</id>
    <published>2015-09-09T01:22:56.000Z</published>
    <updated>2015-09-17T02:28:03.000Z</updated>
    <content type="html"><![CDATA[<p>è¦æ±‚è½¯ä»¶ç‰ˆæœ¬ <code>autoconf &gt; 2.65</code> <code>gcc</code><br>FireFox <code>Copper</code>æ’ä»¶åœ°å€ <code>https://addons.mozilla.org/en-US/firefox/addon/copper-270430/</code></p>
<h2 id="è·å¾—libCoAP">è·å¾—libCoAP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/lecason/libCoAP/archive/master.zip</span><br></pre></td></tr></table></figure>
<h2 id="ç¼–è¯‘å®‰è£…libCoAP">ç¼–è¯‘å®‰è£…libCoAP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> libCoAP-master</span><br><span class="line">autoconf</span><br><span class="line">./configure</span><br><span class="line">make</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæç¤º<code>has modification time 2.5e+08 s in the future</code>ï¼Œæ˜¯æœºå™¨æ—¶é—´è®¾ç½®çš„é—®é¢˜,é‡æ–°è®¾ç½®ä¸‹æœºå™¨æ—¶é—´å°±æå®šäº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y ntp</span><br><span class="line">ntpdate time.nist.gov</span><br></pre></td></tr></table></figure>
<h2 id="libCoAPä½¿ç”¨">libCoAPä½¿ç”¨</h2><p>å¼€å¯æœåŠ¡ç«¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> examples/</span><br><span class="line">./coap-server</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™å°±å¯ä»¥åœ¨å®‰è£…å¥½äº†<code>Copper</code>æ’ä»¶çš„FireFoxä¸Šæ‰“å¼€æœåŠ¡å™¨æ‰€åœ¨åœ°å€ï¼Œæ³¨æ„é˜²ç«å¢™å¼€ç«¯å£ï¼Œæµ‹è¯•çš„è¯ç›´æ¥å…³äº†ã€‚ç‚¹å‡»<code>GET</code>å°±å¯ä»¥çœ‹åˆ°è¿”å›ä¿¡æ¯äº†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This is a <span class="built_in">test</span> server made with libcoap (see http://libcoap.sf.net)</span><br><span class="line">Copyright (C) <span class="number">2010</span>--<span class="number">2013</span> Olaf Bergmann &lt;bergmann@tzi.org&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="/img/coap1.png" alt=""></p>
<p>å®¢æˆ·ç«¯æµ‹è¯•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./coap-client -m put get coap://<span class="number">10.172</span>.<span class="number">1.199</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v:<span class="number">1</span> t:<span class="number">0</span> tkl:<span class="number">0</span> c:<span class="number">3</span> id:<span class="number">54574</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ã€vã€‘è¡¨ç¤ºcoapçš„ç‰ˆæœ¬ç¼–å·ï¼Œæ­¤æ—¶çš„coapçš„ç‰ˆæœ¬ç¼–å·ä¸º1ã€‚</li>
<li>ã€tã€‘è¡¨ç¤ºæŠ¥æ–‡ç±»å‹ä¸ºCONï¼Œ</li>
<li>ã€tklã€‘è¡¨ç¤ºtokenåŒºåŸŸçš„é•¿åº¦ï¼Œæ­¤æ—¶çš„tokenåŒºåŸŸçš„é•¿åº¦ä¸º0ã€‚</li>
<li>ã€cã€‘è¡¨ç¤ºè®¿é—®æ–¹æ³•ï¼ˆè¯¥å¤„è¿˜éœ€è¦åˆ†æï¼‰</li>
<li>ã€idã€‘è¡¨ç¤ºmessage id</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>è¦æ±‚è½¯ä»¶ç‰ˆæœ¬ <code>autoconf &gt; 2.65</code> <code>gcc</code><br>FireFox <code>Copper</code>æ’ä»¶åœ°å€ <code>https://addons.mozilla.org/en-US/firefox]]>
    </summary>
    
      <category term="CoAP" scheme="http://lecason.com/tags/CoAP/"/>
    
      <category term="CoAP" scheme="http://lecason.com/categories/CoAP/"/>
    
  </entry>
  
</feed>
